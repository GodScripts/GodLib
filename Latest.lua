--[[

---//==================================================\\---
--|| > About Library									||--
---\===================================================//---

	Library:		GodLib
	Version:		1.00
	Author:			Devn

---//==================================================\\---
--|| > Changelog										||--
---\===================================================//---

	Version 0.01:
		- Initial library release.
	
	Version 1.00:
		- Library re-write.

--]]

---//==================================================\\---
--|| > Initialization									||--
---\===================================================//---

assert(load(Base64Decode("LS1bWw0KDQotLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBBYm91dCBMaWJyYXJ5CQkJCQkJCQkJfHwtLQ0KLS0tXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQoNCglMaWJyYXJ5OgkJR29kTGliDQoJVmVyc2lvbjoJCTEuMDANCglBdXRob3I6CQkJRGV2bg0KDQotLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBDaGFuZ2Vsb2cJCQkJCQkJCQkJfHwtLQ0KLS0tXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQoNCglWZXJzaW9uIDAuMDE6DQoJCS0gSW5pdGlhbCBsaWJyYXJ5IHJlbGVhc2UuDQoJDQoJVmVyc2lvbiAxLjAwOg0KCQktIExpYnJhcnkgcmUtd3JpdGUuDQoNCi0tXV0NCg0KLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gSW5pdGlhbGl6YXRpb24JCQkJCQkJCQl8fC0tDQotLS1cPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCg0KLS0gUHVibGljIHVzZXIgdmFyaWFibGVzLg0KRW5hYmxlRGVidWdNb2RlCQkJCQkJPSBfRy5Hb2RMaWJfRW5hYmxlRGVidWdNb2RlIG9yIGZhbHNlDQoNCi0tIFB1YmxpYyBzY3JpcHQgdmFyaWFibGVzLg0KU2NyaXB0VGl0bGUJCQkJCQkJPSBfRy5Hb2RMaWJfU2NyaXB0VGl0bGUgb3IgIkdvZFNjcmlwdCINClNjcmlwdE5hbWUJCQkJCQkJPSBfRy5Hb2RMaWJfU2NyaXB0TmFtZSBvciBuaWwNClNjcmlwdFZlcnNpb24JCQkJCQk9IF9HLkdvZExpYl9TY3JpcHRWZXJzaW9uIG9yICIwLjAxIg0KU2NyaXB0RGF0ZQkJCQkJCQk9IF9HLkdvZExpYl9TY3JpcHREYXRlIG9yICJOb3QgUmVsZWFzZWQiDQpSZXF1aXJlZExpYnJhcmllcwkJCQkJPSBfRy5Hb2RMaWJfUmVxdWlyZWRMaWJyYXJpZXMgb3IgeyB9DQpDaGFtcGlvbk5hbWUJCQkJCQk9IF9HLkdvZExpYl9DaGFtcGlvbk5hbWUgb3IgbXlIZXJvLmNoYXJOYW1lDQoNCi0tIFB1YmxpYyBsaWJyYXJ5IHZhcmlhYmxlcy4NCkxpYnJhcnlWZXJzaW9uCQkJCQkJPSAiMS4wMCINCg0KLS0gUHJpdmF0ZSBzY3JpcHQgdmFyaWFibGVzLg0KbG9jYWwgQ2xvc2VkQWNjZXNzCQkJCQk9IF9HLkdvZExpYl9DbG9zZWRBY2Nlc3Mgb3IgZmFsc2UNCg0KLS0gUHJpdmF0ZSBsaWJyYXJ5IHZhcmlhYmxlcy4NCmxvY2FsIFVwZGF0ZUhvc3QJCQkJCT0gInJhdy5naXRodWIuY29tIg0KbG9jYWwgVXBkYXRlUGF0aAkJCQkJPSAiL0dvZFNjcmlwdHMvezF9L21hc3Rlci8iDQpsb2NhbCBVcGRhdGVWZXJzaW9uCQkJCQk9ICJDdXJyZW50LnZlcnNpb24iDQpsb2NhbCBVcGRhdGVTY3JpcHQJCQkJCT0gIkxhdGVzdC5sdWEiDQpsb2NhbCBVcGRhdGVNZXNzYWdlCQkJCQk9ICJNZXNzYWdlLnR4dCINCmxvY2FsIFNlcnZlckhvc3QJCQkJCT0gImdvZHNjcmlwdHMucm95YWx3ZWJob3N0aW5nLm5ldCINCmxvY2FsIFNlcnZlclBhdGgJCQkJCT0gIi97MX0vIg0KbG9jYWwgU2VydmVyR29kTGlzdAkJCQkJPSAiR29kTGlzdC50eHQiDQpsb2NhbCBTZXJ2ZXJXaGl0ZUxpc3QJCQkJPSAiV2hpdGVMaXN0LnR4dCINCmxvY2FsIFNlcnZlckJsYWNrTGlzdAkJCQk9ICJCbGFja0xpc3QudHh0Ig0KbG9jYWwgU2VydmVyQXV0aGVudGljYXRpb24JCQk9ICJBdXRoZW50aWNhdGlvbi50eHQiDQoNCi0tIERlZmF1bHQgcmVxdWlyZWQgbGlicmFyaWVzLg0KUmVxdWlyZWRMaWJyYXJpZXNbIlNvdXJjZUxpYiJdCQk9ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZ2JpbGJhby9CaWxiYW8vbWFzdGVyL0JvTDEvQ29tbW9uL1NvdXJjZUxpYi5sdWEiDQpSZXF1aXJlZExpYnJhcmllc1siVlByZWRpY3Rpb24iXQk9ICJodHRwczovL3Jhdy5naXRodWIuY29tL1JhbHBobG9sL0JvTEdpdC9tYXN0ZXIvVlByZWRpY3Rpb24ubHVhIg0KDQotLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBTdHJpbmcgQ2xhc3MJCQkJCQkJCQkJfHwtLQ0KLS0tXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQoNCmZ1bmN0aW9uIHN0cmluZy5nZm9ybWF0KHN0cmluZywgLi4uKQ0KDQoJbG9jYWwgYXJndW1lbnRzID0geyAuLi4gfQ0KCQ0KCWZvciBpbmRleCA9IDEsICNhcmd1bWVudHMgZG8NCgkJc3RyaW5nID0gc3RyaW5nOmdzdWIoInsiLi50b3N0cmluZyhpbmRleCkuLiJ9IiwgdG9zdHJpbmcoYXJndW1lbnRzW2luZGV4XSkpDQoJZW5kDQoJDQoJcmV0dXJuIHN0cmluZw0KDQplbmQNCg0KZnVuY3Rpb24gc3RyaW5nLmVxdWFscyhzdHJpbmcsIHZhbHVlLCBleGFjdCkNCg0KCWlmIChub3QgZXhhY3QpIHRoZW4NCgkJc3RyaW5nID0gc3RyaW5nOmxvd2VyKCk6dHJpbSgpDQoJCXZhbHVlID0gdmFsdWU6bG93ZXIoKTp0cmltKCkNCgllbmQNCg0KCXJldHVybiAoc3RyaW5nID09IHZhbHVlKQ0KDQplbmQNCg0KZnVuY3Rpb24gc3RyaW5nLnRyaW0oc3RyaW5nKQ0KDQoJcmV0dXJuIHN0cmluZzpnc3ViKCJeJXMqKC4tKSVzKiQiLCAiJTEiKQ0KDQplbmQNCg0KZnVuY3Rpb24gc3RyaW5nLnNwbGl0KHN0cmluZywgdmFsdWUpDQoNCglsb2NhbCByZXN1bHRzID0geyB9DQoJDQoJZm9yIHJlc3VsdCBpbiBzdHJpbmc6Z21hdGNoKEZvcm1hdCgiKFteezF9XSspIiwgdmFsdWUpKSBkbw0KCQl0YWJsZS5pbnNlcnQocmVzdWx0cywgcmVzdWx0KQ0KCWVuZA0KCQ0KCXJldHVybiByZXN1bHRzDQoNCmVuZA0KDQotLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBNaXNjLiBWYXJpYWJsZXMJCQkJCQkJCQl8fC0tDQotLS1cPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCg0KTWVzc2FnZVR5cGUJCT0gew0KCVsiSW5mbyJdCT0gImJlZjc4MSIsDQoJWyJXYXJuaW5nIl0JPSAiZjc4MWJlIiwNCglbIkVycm9yIl0JPSAiZjc4MTgzIiwNCglbIkRlYnVnIl0JPSAiODFiZWY3IiwNCn0NCg0KLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gTWlzYy4gRnVuY3Rpb25zCQkJCQkJCQkJfHwtLQ0KLS0tXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQoNCmZ1bmN0aW9uIFByaW50TG9jYWwodGV4dCwgdHlwZSkNCg0KCWlmICh0eXBlIGFuZCAodHlwZSA9PSBNZXNzYWdlVHlwZS5EZWJ1ZykgYW5kIG5vdCBFbmFibGVEZWJ1Z01vZGUpIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoNCglsb2NhbCBjb2xvciA9IHR5cGUgb3IgTWVzc2FnZVR5cGUuSW5mbw0KCVByaW50Q2hhdChGb3JtYXQoIjxmb250IGNvbG9yPVwiIzgxODNmN1wiPnsxfTo8L2ZvbnQ+IDxmb250IGNvbG9yPVwiI3syfVwiPnszfTwvZm9udD4iLCBTY3JpcHRUaXRsZSwgY29sb3IsIHRleHQpKQ0KCQ0KZW5kDQoNCmZ1bmN0aW9uIEZvcm1hdChzdHJpbmcsIC4uLikNCg0KCXJldHVybiBzdHJpbmc6Z2Zvcm1hdCguLi4pDQoNCmVuZA0KDQpmdW5jdGlvbiBFbmVteVdpdGhpblJhbmdlKHJhbmdlKQ0KDQoJZm9yIF8sIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KCQlpZiAoR2V0RGlzdGFuY2UoZW5lbXkpIDw9IHJhbmdlKSB0aGVuDQoJCQlyZXR1cm4gdHJ1ZQ0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gZmFsc2UNCg0KZW5kDQoNCmZ1bmN0aW9uIElzVmFsaWQodGFyZ2V0LCByYW5nZSwgZnJvbSkNCg0KCWZyb20gPSBmcm9tIG9yIG15SGVybw0KDQoJaWYgKFZhbGlkVGFyZ2V0KHRhcmdldCkpIHRoZW4NCgkJaWYgKG5vdCByYW5nZSBvciAoR2V0RGlzdGFuY2UodGFyZ2V0LCBmcm9tKSA8PSByYW5nZSkpIHRoZW4NCgkJCWlmIChub3QgKEhhc0J1ZmYodGFyZ2V0LCAiVW5keWluZ1JhZ2UiKSBhbmQgKHRhcmdldC5oZWFsdGggPT0gMSkpIGFuZCBub3QgSGFzQnVmZih0YXJnZXQsICJKdWRpY2F0b3JJbnRlcnZlbnRpb24iKSkgdGhlbg0KCQkJCXJldHVybiB0cnVlDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoJDQoJcmV0dXJuIGZhbHNlDQoNCmVuZA0KDQpmdW5jdGlvbiBIYXNCdWZmKHVuaXQsIG5hbWUsIGxvb3NlKQ0KDQoJZm9yIGkgPSAxLCB1bml0LmJ1ZmZDb3VudCBkbw0KICAgICAgICBsb2NhbCBidWZmID0gdW5pdDpnZXRCdWZmKGkpDQoJCWlmIChidWZmLnZhbGlkIGFuZCBCdWZmSXNWYWxpZChidWZmKSkgdGhlbg0KCQkJaWYgKG5vdCBsb29zZSkgdGhlbg0KCQkJCWlmIChidWZmLm5hbWU6ZXF1YWxzKG5hbWUpKSB0aGVuDQoJCQkJCXJldHVybiB0cnVlDQoJCQkJZW5kDQoJCQllbHNlaWYgKGJ1ZmYubmFtZTpsb3dlcigpOmZpbmQobmFtZSkpIHRoZW4NCgkJCQlyZXR1cm4gdHJ1ZQ0KCQkJZW5kDQoJCWVuZA0KICAgIGVuZA0KCQ0KICAgIHJldHVybiBmYWxzZQ0KDQplbmQNCg0KZnVuY3Rpb24gSGF2ZUVub3VnaE1hbmEocGVyY2VudCwgdW5pdCkNCg0KCXVuaXQgPSB1bml0IG9yIG15SGVybw0KCXJldHVybiAoKHVuaXQubWFuYSAvIHVuaXQubWF4TWFuYSkgPj0gKHBlcmNlbnQgLyAxMDApKQ0KDQplbmQNCg0KZnVuY3Rpb24gSXNGbGVlaW5nKHVuaXQsIHJhbmdlLCBmcm9tLCBkaXN0YW5jZSkNCg0KCWZyb20gCQk9IGZyb20gb3IgbXlIZXJvDQoJZGlzdGFuY2UJPSBkaXN0YW5jZSBvciAwDQoNCglsb2NhbCBwb3NpdGlvbiA9IFByZWRpY3Rpb246R2V0UHJlZGljdGVkUG9zKHVuaXQsIDAuMSkNCgkNCglpZiAocG9zaXRpb24gYW5kIChHZXREaXN0YW5jZShwb3NpdGlvbiwgZnJvbSkgPiAoR2V0RGlzdGFuY2UodW5pdCwgZnJvbSkgKyBkaXN0YW5jZSkpIGFuZCAoR2V0RGlzdGFuY2UodW5pdCwgZnJvbSkgPj0gcmFuZ2UpKSB0aGVuDQoJCXJldHVybiB0cnVlDQoJZW5kDQoJDQoJcmV0dXJuIGZhbHNlDQoNCmVuZA0KDQpmdW5jdGlvbiBJc0ZhY2luZyh1bml0LCBmcm9tLCBkaXN0YW5jZSkNCg0KCWxvY2FsIGZyb20gCT0gZnJvbSBvciBteUhlcm8NCgkNCglsb2NhbCBwb3MxCT0gVmVjdG9yKHVuaXQueCwgdW5pdC56KQ0KCWxvY2FsIHBvczIJPSBWZWN0b3IodW5pdC54LCB1bml0LnopDQoJDQoJcG9zMQkJPSBwb3MxIC0gcG9zMjpub3JtYWxpemVkKCkNCglwb3MxCQk9IHBvczIgKyBwb3MxICogR2V0RGlzdGFuY2UoZnJvbSwgdW5pdCkNCgkNCglyZXR1cm4gKEdldERpc3RhbmNlKGZyb20sIHsgeCA9IHBvczEueCwgeiA9IHBvczEueSB9KSA8PSAoZGlzdGFuY2Ugb3IgOTAwMDApKQ0KDQplbmQNCg0KZnVuY3Rpb24gQ291bnRFbmVtaWVzSW5SYW5nZShyYW5nZSwgZnJvbSkNCg0KCWZyb20JCT0gZnJvbSBvciBteUhlcm8NCglsb2NhbCBjb3VudCA9IDANCgkNCglmb3IgXywgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQoJCWlmIChHZXREaXN0YW5jZShyYW5nZSwgZnJvbSkgPD0gcmFuZ2UpIHRoZW4NCgkJCWNvdW50ID0gY291bnQgKyAxDQoJCWVuZA0KCWVuZA0KCQ0KCXJldHVybiBjb3VudA0KDQplbmQNCg0KZnVuY3Rpb24gSW5SYW5nZSh1bml0LCByYW5nZSwgZnJvbSkNCg0KCXJldHVybiAoR2V0RGlzdGFuY2UodW5pdCwgZnJvbSkgPD0gcmFuZ2UpDQoNCmVuZA0KDQpmdW5jdGlvbiBIZWFsdGhMb3dlclRoZW5QZXJjZW50KHBlcmNlbnQsIHVuaXQpDQoNCgl1bml0ID0gdW5pdCBvciBteUhlcm8NCglyZXR1cm4gKCh1bml0LmhlYWx0aCAvIHVuaXQubWF4SGVhbHRoKSA+PSAocGVyY2VudCAvIDEwMCkpDQoNCmVuZA0KDQotLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBDYWxsYmFja3MgQ2xhc3MJCQkJCQkJCQl8fC0tDQotLS1cPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCg0KY2xhc3MoIkNhbGxiYWNrcyIpDQoNCmZ1bmN0aW9uIENhbGxiYWNrczpfX2luaXQoKQ0KDQoJc2VsZi5fX0NhbGxiYWNrcyA9IHsgfQ0KDQplbmQNCg0KZnVuY3Rpb24gQ2FsbGJhY2tzOkJpbmQobmFtZSwgY2FsbGJhY2spDQoNCglpZiAobm90IHNlbGYuX19DYWxsYmFja3NbbmFtZV0pIHRoZW4NCgkJc2VsZi5fX0NhbGxiYWNrc1tuYW1lXSA9IHsgfQ0KCWVuZA0KCQ0KCXRhYmxlLmluc2VydChzZWxmLl9fQ2FsbGJhY2tzW25hbWVdLCBjYWxsYmFjaykNCg0KZW5kDQoNCmZ1bmN0aW9uIENhbGxiYWNrczpDYWxsKG5hbWUsIC4uLikNCg0KCWlmIChzZWxmLl9fQ2FsbGJhY2tzW25hbWVdKSB0aGVuDQoJCWZvciBfLCBjYWxsYmFjayBpbiBpcGFpcnMoc2VsZi5fX0NhbGxiYWNrc1tuYW1lXSkgZG8NCgkJCWNhbGxiYWNrKHRhYmxlLnVucGFjayh7IC4uLiB9KSkNCgkJZW5kDQoJZW5kDQoNCmVuZA0KDQpmdW5jdGlvbiBDYWxsYmFja3M6X19PbkxvYWQoKQ0KDQoJQWRkVW5sb2FkQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOkNhbGwoIlVubG9hZCIpIGVuZCkNCgkNCglBZGRQcm9jZXNzU3BlbGxDYWxsYmFjayhmdW5jdGlvbih1bml0LCBzcGVsbCkgc2VsZjpfX09uUHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKSBlbmQpDQoJQWRkQ3JlYXRlT2JqQ2FsbGJhY2soZnVuY3Rpb24ob2JqZWN0KSBzZWxmOl9fT25DcmVhdGVPYmoob2JqZWN0KSBlbmQpDQoJQWRkQ3JlYXRlT2JqQ2FsbGJhY2soZnVuY3Rpb24ob2JqZWN0KSBzZWxmOl9fT25EZWxldGVPYmoob2JqZWN0KSBlbmQpDQoJDQoJaWYgKFN4T3JiKSB0aGVuDQoJCVN4T3JiOlJlZ2lzdGVyQmVmb3JlQXR0YWNrQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOkNhbGwoIkJlZm9yZUF0dGFjayIpIGVuZCkNCgllbmQNCgkNCglpZiAoVklQX1VTRVIpIHRoZW4NCgkJQWRkU2VuZFBhY2tldENhbGxiYWNrKGZ1bmN0aW9uKHBhY2tldCkgc2VsZjpDYWxsKCJTZW5kUGFja2V0IiwgcGFja2V0KSBlbmQpDQoJCUFkZFJlY3ZQYWNrZXRDYWxsYmFjayhmdW5jdGlvbihwYWNrZXQpIHNlbGY6Q2FsbCgiUmVjdlBhY2tldCIsIHBhY2tldCkgZW5kKQ0KCWVuZA0KDQplbmQNCg0KZnVuY3Rpb24gQ2FsbGJhY2tzOl9fT25Qcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpDQoNCglpZiAodW5pdCBhbmQgc3BlbGwpIHRoZW4NCgkJc2VsZjpDYWxsKCJQcm9jZXNzU3BlbGwiLCB1bml0LCBzcGVsbCkNCgllbmQNCg0KZW5kDQoNCmZ1bmN0aW9uIENhbGxiYWNrczpfX09uQ3JlYXRlT2JqKG9iamVjdCkNCg0KCWlmIChvYmplY3QgYW5kIG9iamVjdC52YWxpZCkgdGhlbg0KCQlzZWxmOkNhbGwoIkNyZWF0ZU9iaiIsIG9iamVjdCkNCgllbmQNCg0KZW5kDQoNCmZ1bmN0aW9uIENhbGxiYWNrczpfX09uRGVsZXRlT2JqKG9iamVjdCkNCg0KCWlmIChvYmplY3QgYW5kIG9iamVjdC52YWxpZCkgdGhlbg0KCQlzZWxmOkNhbGwoIkRlbGV0ZU9iaiIsIG9iamVjdCkNCgllbmQNCg0KZW5kDQoNCkNhbGxiYWNrcyA9IENhbGxiYWNrcygpDQoNCi0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IERyYXdNYW5hZ2VyIENsYXNzCQkJCQkJCQl8fC0tDQotLS1cPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCg0KY2xhc3MoIkRyYXdNYW5hZ2VyIikNCg0KZnVuY3Rpb24gRHJhd01hbmFnZXI6X19pbml0KCkNCg0KCXNlbGYuQ29uZmlnCQkJPSBuaWwNCglzZWxmLkNvbG9ycwkJCT0geyB9DQoJc2VsZi5SYW5nZURyYXdpbmdzCT0geyB9DQoJDQoJc2VsZi5Db2xvclZhbHVlcwk9IHsNCgkJWzAxXQkJCT0geyBOYW1lID0gIldoaXRlIiwgICAgICAgVmFsdWUgPSBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkgfSwNCgkJWzAyXQkJCT0geyBOYW1lID0gIkxpZ2h0IEJsdWUiLCAgVmFsdWUgPSBBUkdCKDI1NSwgMTI4LCAxOTIsIDI1NSkgfSwNCgkJWzAzXQkJCT0geyBOYW1lID0gIkJsdWUiLCAgICAgICAgVmFsdWUgPSBBUkdCKDI1NSwgMCwgMCwgMjU1KSB9LA0KCQlbMDRdCQkJPSB7IE5hbWUgPSAiRGFyayBCbHVlIiwgICBWYWx1ZSA9IEFSR0IoMjU1LCAwLCAwLCAxMjgpIH0sDQoJCVswNV0JCQk9IHsgTmFtZSA9ICJZZWxsb3ciLCAgICAgIFZhbHVlID0gQVJHQigyNTUsIDI1NSwgMjU1LCAwKSB9LA0KCQlbMDZdCQkJPSB7IE5hbWUgPSAiTGltZSIsICAgICAgICBWYWx1ZSA9IEFSR0IoMjU1LCAxMjgsIDI1NSwgMCkgfSwNCgkJWzA3XQkJCT0geyBOYW1lID0gIkxpZ2h0IEdyZWVuIiwgVmFsdWUgPSBBUkdCKDI1NSwgMTI4LCAyNTUsIDEyOCkgfSwNCgkJWzA4XQkJCT0geyBOYW1lID0gIkdyZWVuIiwgICAgICAgVmFsdWUgPSBBUkdCKDI1NSwgMCwgMjU1LCAwKSB9LA0KCQlbMDldCQkJPSB7IE5hbWUgPSAiRGFyayBHcmVlbiIsICBWYWx1ZSA9IEFSR0IoMjU1LCAwLCAxMjgsIDApIH0sDQoJCVsxMF0JCQk9IHsgTmFtZSA9ICJNYWdlbnRhIiwgICAgIFZhbHVlID0gQVJHQigyNTUsIDI1NSwgMCwgMjU1KSB9LA0KCQlbMTFdCQkJPSB7IE5hbWUgPSAiUmVkIiwgICAgICAgICBWYWx1ZSA9IEFSR0IoMjU1LCAyNTUsIDAsIDApIH0sDQoJCVsxMl0JCQk9IHsgTmFtZSA9ICJEYXJrIFJlZCIsICAgIFZhbHVlID0gQVJHQigyNTUsIDEyOCwgMCwgMCkgfSwNCgkJWzEzXQkJCT0geyBOYW1lID0gIkN5YW4iLCAgICAgICAgVmFsdWUgPSBBUkdCKDI1NSwgMCwgMjU1LCAyNTUpIH0sDQoJCVsxNF0JCQk9IHsgTmFtZSA9ICJHcmF5IiwgICAgICAgIFZhbHVlID0gQVJHQigyNTUsIDEyOCwgMTI4LCAxMjgpIH0sDQoJCVsxNV0JCQk9IHsgTmFtZSA9ICJCcm93biIsICAgICAgIFZhbHVlID0gQVJHQigyNTUsIDk2LCA0OCwgMCkgfSwNCgkJWzE2XQkJCT0geyBOYW1lID0gIk9yYW5nZSIsICAgICAgVmFsdWUgPSBBUkdCKDI1NSwgMjU1LCAxMjgsIDApIH0sDQoJCVsxN10JCQk9IHsgTmFtZSA9ICJQdXJwbGUiLCAgICAgIFZhbHVlID0gQVJHQigyNTUsIDE5MiwgMCwgMjU1KSB9LA0KCX0NCg0KCWZvciBpID0gMSwgI3NlbGYuQ29sb3JWYWx1ZXMgZG8NCgkJdGFibGUuaW5zZXJ0KHNlbGYuQ29sb3JzLCBzZWxmLkNvbG9yVmFsdWVzW2ldLk5hbWUpDQoJZW5kDQoNCmVuZA0KDQpmdW5jdGlvbiBEcmF3TWFuYWdlcjpMb2FkVG9NZW51KGNvbmZpZykNCg0KCWNvbmZpZzpUb2dnbGUoIkRpc2FibGVkIiwgIkRpc2FibGUgYWxsIERyYXdpbmciLCBmYWxzZSkNCgljb25maWc6U2VwYXJhdG9yKCkNCgljb25maWc6VG9nZ2xlKCJMb3dGUFMiLCAiVXNlIExvdyBGUFMgRHJhd2luZyIsIGZhbHNlKQ0KCWNvbmZpZzpTbGlkZXIoIldpZHRoIiwgIkNpcmNsZSBXaWR0aCIsIDEsIDEsIDEwKQ0KCWNvbmZpZzpTbGlkZXIoIlF1YWxpdHkiLCAiQ2lyY2xlIFF1YWxpdHkiLCA3NSwgNzUsIDUwMCkNCgkNCglzZWxmLkNvbmZpZyA9IGNvbmZpZw0KDQplbmQNCg0KZnVuY3Rpb24gRHJhd01hbmFnZXI6R2V0Q29sb3IoaW5kZXgpDQoNCglpZiAodHlwZShpbmRleCkgPT0gIm51bWJlciIpIHRoZW4NCgkJcmV0dXJuIHNlbGYuQ29sb3JWYWx1ZXNbaW5kZXhdLlZhbHVlDQoJZWxzZWlmICh0eXBlKGluZGV4KSA9PSAic3RyaW5nIikgdGhlbg0KCQlyZXR1cm4gc2VsZi5Db2xvclZhbHVlc1tzZWxmOkdldENvbG9ySW5kZXgoaW5kZXgpXS5WYWx1ZQ0KCWVuZA0KDQplbmQNCg0KZnVuY3Rpb24gRHJhd01hbmFnZXI6R2V0Q29sb3JJbmRleChuYW1lKQ0KDQoJZm9yIGluZGV4LCBjb2xvciBpbiBpcGFpcnMoc2VsZi5Db2xvclZhbHVlcykgZG8NCgkJaWYgKGNvbG9yLk5hbWU6bG93ZXIoKSA9PSBuYW1lOmxvd2VyKCkpIHRoZW4NCgkJCXJldHVybiBpbmRleA0KCQllbmQNCgllbmQNCg0KZW5kDQoNCmZ1bmN0aW9uIERyYXdNYW5hZ2VyOkRyYXdDaXJjbGUoeCwgeSwgeiwgcmFuZ2UsIGNvbG9yKQ0KDQoJaWYgKHR5cGUoY29sb3IpID09ICJudW1iZXIiKSB0aGVuDQoJCWNvbG9yID0gc2VsZjpHZXRDb2xvcihjb2xvcikNCgllbmQNCg0KCWlmIChzZWxmLkNvbmZpZyBhbmQgc2VsZi5Db25maWcuTG93RlBTKSB0aGVuDQoJCXNlbGY6X19Mb3dGUFNEcmF3Q2lyY2xlKHgsIHksIHosIHJhbmdlLCBjb2xvcikNCgllbHNlDQoJCURyYXdDaXJjbGUoeCwgeSwgeiwgcmFuZ2UsIGNvbG9yKQ0KCWVuZA0KDQplbmQNCg0KZnVuY3Rpb24gRHJhd01hbmFnZXI6RHJhd0NpcmNsZUF0KHZlY3RvciwgcmFuZ2UsIGNvbG9yKQ0KDQoJc2VsZjpEcmF3Q2lyY2xlKHZlY3Rvci54LCB2ZWN0b3IueSwgdmVjdG9yLnosIHJhbmdlLCBjb2xvcikNCg0KZW5kDQoNCmZ1bmN0aW9uIERyYXdNYW5hZ2VyOkRyYXdUZXh0KHRleHQsIHNpemUsIHgsIHksIGNvbG9yKQ0KDQoJaWYgKHR5cGUoY29sb3IpID09ICJudW1iZXIiKSB0aGVuDQoJCWNvbG9yID0gc2VsZjpHZXRDb2xvcihjb2xvcikNCgllbmQNCgkNCglEcmF3VGV4dCh0ZXh0LCBzaXplLCB4LCB5LCBjb2xvcikNCgkNCmVuZA0KDQpmdW5jdGlvbiBEcmF3TWFuYWdlcjpEcmF3VGV4dFdpdGhCb3JkZXIodGV4dCwgc2l6ZSwgeCwgeSwgY29sb3IsIGJvcmRlcikNCg0KCWJvcmRlciA9IGJvcmRlciBvciBBUkdCKDI1NSwgMCwgMCwgMCkNCg0KCXNlbGY6RHJhd1RleHQodGV4dCwgc2l6ZSwgeCArIDEsIHksIGJvcmRlcikNCglzZWxmOkRyYXdUZXh0KHRleHQsIHNpemUsIHggLSAxLCB5LCBib3JkZXIpDQoJc2VsZjpEcmF3VGV4dCh0ZXh0LCBzaXplLCB4LCB5IC0gMSwgYm9yZGVyKQ0KCXNlbGY6RHJhd1RleHQodGV4dCwgc2l6ZSwgeCwgeSArIDEsIGJvcmRlcikNCgkNCglzZWxmOkRyYXdUZXh0KHRleHQsIHNpemUsIHgsIHksIGNvbG9yKQ0KDQplbmQNCg0KZnVuY3Rpb24gRHJhd01hbmFnZXI6X19Mb3dGUFNEcmF3Q2lyY2xlKHgsIHksIHosIHJhbmdlLCBjb2xvcikNCg0KCWxvY2FsIHYxCT0gVmVjdG9yKHgsIHksIHopDQoJbG9jYWwgdjIJPSBWZWN0b3IoY2FtZXJhUG9zLngsIGNhbWVyYVBvcy55LCBjYW1lcmFQb3MueikNCgkNCglsb2NhbCB0UG9zCT0gdjEgLSAodjEgLSB2Mik6bm9ybWFsaXplZCgpICogcmFuZ2UNCglsb2NhbCBzUG9zCT0gV29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyh0UG9zLngsIHRQb3MueSwgdFBvcy56KSkNCgkNCglpZiAoT25TY3JlZW4oeyB4ID0gc1Bvcy54LCB5ID0gc1Bvcy55IH0sIHsgeCA9IHNQb3MueCwgeSA9IHNQb3MueSB9KSkgdGhlbg0KCQ0KCQlsb2NhbCB3aWR0aCAJCT0gc2VsZi5Db25maWcuV2lkdGgNCgkJbG9jYWwgY2hvcmRsZW5ndGgJPSBzZWxmLkNvbmZpZy5RdWFsaXR5DQoJCWxvY2FsIHF1YWxpdHkJCT0gbWF0aC5tYXgoOCwgbWF0aC5yb3VuZCgxODAgLyBtYXRoLmRlZyhtYXRoLmFzaW4oY2hvcmRsZW5ndGggLyAoMiAqIHJhbmdlKSkpKSkNCgkJDQoJCXF1YWxpdHkgCQkJPSAyICogbWF0aC5waSAvIHF1YWxpdHkNCgkJcmFuZ2UgCQkJCT0gcmFuZ2UgKiAwLjkyDQoJCQ0KCQlsb2NhbCBwb2ludHMgCQk9IHsgfQ0KCQkNCgkJZm9yIHRoZXRhID0gMCwgKDIgKiBtYXRoLnBpICsgcXVhbGl0eSksIHF1YWxpdHkgZG8NCgkJCWxvY2FsIHBvaW50ID0gV29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyh4ICsgcmFuZ2UgKiBtYXRoLmNvcyh0aGV0YSksIHksIHogLSByYW5nZSAqIG1hdGguc2luKHRoZXRhKSkpDQoJCQlwb2ludHNbI3BvaW50cyArIDFdID0gRDNEWFZFQ1RPUjIocG9pbnQueCwgcG9pbnQueSkNCgkJZW5kDQoJCQ0KCQlEcmF3TGluZXMyKHBvaW50cywgd2lkdGgsIGNvbG9yKQ0KCQkNCgllbmQNCg0KZW5kDQoNCmZ1bmN0aW9uIERyYXdNYW5hZ2VyOl9fRHJhdygpDQoNCglpZiAobm90IHNlbGYuQ29uZmlnIG9yIHNlbGYuQ29uZmlnLkRpc2FibGVkKSB0aGVuDQoJCXJldHVybg0KCWVuZA0KDQoJQ2FsbGJhY2tzOkNhbGwoIkRyYXciKQ0KDQplbmQNCg0KRHJhd01hbmFnZXIgPSBEcmF3TWFuYWdlcigpDQoNCi0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IFZpc3VhbERlYnVnZ2VyIENsYXNzCQkJCQkJCQl8fC0tDQotLS1cPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCg0KY2xhc3MgIlZpc3VhbERlYnVnZ2VyIg0KDQpmdW5jdGlvbiBWaXN1YWxEZWJ1Z2dlcjpfX2luaXQoKQ0KDQoJc2VsZi5Db25maWcJPSBuaWwNCglzZWxmLkdyb3Vwcwk9IHsgfQ0KCQ0KCUNhbGxiYWNrczpCaW5kKCJJbml0aWFsaXplIiwgZnVuY3Rpb24oKSBzZWxmOl9fT25Mb2FkKCkgZW5kKQ0KDQplbmQNCg0KZnVuY3Rpb24gVmlzdWFsRGVidWdnZXI6R3JvdXAobmFtZSwgdGV4dCkNCg0KCXNlbGYuR3JvdXBzW25hbWVdID0geyBUZXh0ID0gdGV4dCwgVmFyaWFibGVzID0geyB9IH0NCg0KZW5kDQoNCmZ1bmN0aW9uIFZpc3VhbERlYnVnZ2VyOlZhcmlhYmxlKGdyb3VwLCB0ZXh0LCByZXN1bHQpDQoNCglpZiAoc2VsZi5Hcm91cHNbZ3JvdXBdKSB0aGVuDQoJCXRhYmxlLmluc2VydChzZWxmLkdyb3Vwc1tncm91cF0uVmFyaWFibGVzLCB7IFRleHQgPSB0ZXh0LCBSZXN1bHQgPSByZXN1bHQsIFZhbHVlID0gIiIgfSkNCgllbmQNCg0KZW5kDQoNCmZ1bmN0aW9uIFZpc3VhbERlYnVnZ2VyOkxvYWRUb01lbnUoY29uZmlnKQ0KDQoJbG9jYWwgZ3JvdXBGb3VuZCA9IGZhbHNlDQoJZm9yIG5hbWUsIGdyb3VwIGluIHBhaXJzKHNlbGYuR3JvdXBzKSBkbw0KCQlncm91cEZvdW5kID0gdHJ1ZQ0KCQlsb2NhbCBuYW1lID0gRm9ybWF0KCJHcm91cHsxfSIsIG5hbWUpDQoJCWNvbmZpZzpNZW51KG5hbWUsIEZvcm1hdCgiR3JvdXA6IHsxfSIsIGdyb3VwLlRleHQpKQ0KCQlsb2NhbCB2YXJpYWJsZUZvdW5kID0gZmFsc2UNCgkJZm9yIGkgPSAxLCAjZ3JvdXAuVmFyaWFibGVzIGRvDQoJCQl2YXJpYWJsZUZvdW5kID0gdHJ1ZQ0KCQkJbG9jYWwgdmFyaWFibGUgPSBncm91cC5WYXJpYWJsZXNbaV0NCgkJCWNvbmZpZ1tuYW1lXTpUb2dnbGUoRm9ybWF0KCJWYXJpYWJsZXsxfSIsIGkpLCB2YXJpYWJsZS5UZXh0LCB0cnVlKQ0KCQllbmQNCgkJaWYgKG5vdCB2YXJpYWJsZUZvdW5kKSB0aGVuDQoJCQljb25maWc6Tm90ZSgiTm8gZGVidWcgdmFyaWFibGVzIGZvdW5kLiIpDQoJCWVuZA0KCQljb25maWdbbmFtZV06U2VwYXJhdG9yKCkNCgkJY29uZmlnW25hbWVdOlRvZ2dsZSgiRW5hYmxlZCIsICJHcm91cCBFbmFibGVkIiwgdHJ1ZSkNCgllbmQNCglpZiAobm90IGdyb3VwRm91bmQpIHRoZW4NCgkJY29uZmlnOk5vdGUoIk5vIGRlYnVnIGdyb3VwcyBmb3VuZC4iKQ0KCWVuZA0KCQ0KCWNvbmZpZzpTZXBhcmF0b3IoKQ0KCWNvbmZpZzpUb2dnbGUoIkVuYWJsZWQiLCAiRGVidWdnZXIgRW5hYmxlZCIsIGZhbHNlKQ0KCWNvbmZpZzpOb3RlKCJVcGRhdGVzIGFzIGZhc3QgYXMgZHJhdyBUUFMuIikNCgljb25maWc6U2VwYXJhdG9yKCkNCgljb25maWc6U2xpZGVyKCJQb3NpdGlvblgiLCAiSG9yaXpvbnRhbCBBbGlnbm1lbnQgKFgpIiwgNzUsIDAsIDIwMDApDQoJY29uZmlnOlNsaWRlcigiUG9zaXRpb25ZIiwgIlZlcnRpY2FsIEFsaWdubWVudCAoWSkiLCA3NSwgMCwgMjAwMCkNCgljb25maWc6U2VwYXJhdG9yKCkNCgljb25maWc6U2xpZGVyKCJTaXplIiwgIlRleHQgU2l6ZSIsIDE1LCAxMCwgMzApDQoJY29uZmlnOkRyb3BEb3duKCJDb2xvciIsICJUZXh0IENvbG9yIiwgMSwgRHJhd01hbmFnZXIuQ29sb3JzKQ0KCQ0KCXNlbGYuQ29uZmlnID0gY29uZmlnDQoNCmVuZA0KDQpmdW5jdGlvbiBWaXN1YWxEZWJ1Z2dlcjpfX09uRHJhdygpDQoNCglpZiAobm90IHNlbGYuQ29uZmlnIG9yIG5vdCBzZWxmLkNvbmZpZy5FbmFibGVkKSB0aGVuDQoJCXJldHVybg0KCWVuZA0KDQoJbG9jYWwgcG9zWCAJPSBzZWxmLkNvbmZpZy5Qb3NpdGlvblgNCglsb2NhbCBwb3NZIAk9IHNlbGYuQ29uZmlnLlBvc2l0aW9uWQ0KCWxvY2FsIHNpemUgCT0gc2VsZi5Db25maWcuU2l6ZQ0KCWxvY2FsIGNvbG9yCT0gc2VsZi5Db25maWcuQ29sb3INCgkNCglmb3IgbmFtZSwgZ3JvdXAgaW4gcGFpcnMoc2VsZi5Hcm91cHMpIGRvDQoJCWxvY2FsIG5hbWUgPSBGb3JtYXQoIkdyb3VwezF9IiwgbmFtZSkNCgkJaWYgKHNlbGYuQ29uZmlnW25hbWVdLkVuYWJsZWQpIHRoZW4NCgkJCURyYXdNYW5hZ2VyOkRyYXdUZXh0KEZvcm1hdCgiLS0tLS0tLS0tLSB7MX0gLS0tLS0tLS0tLSIsIGdyb3VwLlRleHQpLCBzaXplLCBwb3NYLCBwb3NZLCBjb2xvcikNCgkJCXBvc1kgPSBwb3NZICsgc2l6ZQ0KCQkJZm9yIGkgPSAxLCAjZ3JvdXAuVmFyaWFibGVzIGRvDQoJCQkJbG9jYWwgdmFyID0gRm9ybWF0KCJWYXJpYWJsZXsxfSIsIGkpDQoJCQkJbG9jYWwgdmFyaWFibGUgPSBncm91cC5WYXJpYWJsZXNbaV0NCgkJCQlpZiAoc2VsZi5Db25maWdbbmFtZV1bdmFyXSkgdGhlbg0KCQkJCQlsb2NhbCB2YWx1ZSA9IG5pbA0KCQkJCQlpZiAodHlwZSh2YXJpYWJsZS5SZXN1bHQpID09ICJmdW5jdGlvbiIpIHRoZW4NCgkJCQkJCXZhbHVlID0gdmFyaWFibGU6UmVzdWx0KCkNCgkJCQkJZWxzZQ0KCQkJCQkJdmFsdWUgPSB2YXJpYWJsZS5SZXN1bHQNCgkJCQkJZW5kDQoJCQkJCWlmICh0eXBlKHZhbHVlKSA9PSAidGFibGUiKSB0aGVuDQoJCQkJCQl2YXJpYWJsZS5WYWx1ZSA9IHRhYmxlLnRvc3RyaW5nKHZhbHVlKQ0KCQkJCQllbHNlDQoJCQkJCQl2YXJpYWJsZS5WYWx1ZSA9IHRvc3RyaW5nKHZhbHVlKQ0KCQkJCQllbmQNCgkJCQkJRHJhd01hbmFnZXI6RHJhd1RleHQoRm9ybWF0KCJ7MX0gPSB7Mn0iLCB2YXJpYWJsZS5UZXh0LCB2YXJpYWJsZS5WYWx1ZSksIHNpemUsIHBvc1gsIHBvc1ksIGNvbG9yKQ0KCQkJCQlwb3NZID0gcG9zWSArIHNpemUNCgkJCQllbmQNCgkJCWVuZA0KCQkJcG9zWSA9IHBvc1kgKyBzaXplDQoJCWVuZA0KCWVuZA0KDQplbmQNCg0KZnVuY3Rpb24gVmlzdWFsRGVidWdnZXI6X19PbkxvYWQoKQ0KDQoJaWYgKEVuYWJsZURlYnVnTW9kZSkgdGhlbg0KCQlDYWxsYmFja3M6QmluZCgiRHJhdyIsIGZ1bmN0aW9uKCkgc2VsZjpfX09uRHJhdygpIGVuZCkNCgllbmQNCg0KZW5kDQoNCkRlYnVnZ2VyID0gVmlzdWFsRGVidWdnZXIoKQ0KDQotLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBUaWNrTWFuYWdlciBDbGFzcwkJCQkJCQkJfHwtLQ0KLS0tXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQoNCmNsYXNzKCJUaWNrTWFuYWdlciIpDQoNCmZ1bmN0aW9uIFRpY2tNYW5hZ2VyOl9faW5pdCgpDQoNCglzZWxmLl9fQ29uZmlnCQk9IG5pbA0KCXNlbGYuX19DYWxsYmFja3MJPSB7IH0NCgkNCglzZWxmOkFkZCgiRHJhdyIsICJEcmF3IFJlZnJlc2ggUmF0ZSIsIDEwMCwgbmlsKQ0KCQ0KCUNhbGxiYWNrczpCaW5kKCJJbml0aWFsaXplIiwgZnVuY3Rpb24oKSBzZWxmOl9fT25Mb2FkKCkgZW5kKQ0KDQplbmQNCg0KZnVuY3Rpb24gVGlja01hbmFnZXI6QWRkKG5hbWUsIHRpdGxlLCBkZWZhdWx0LCBjYWxsYmFjaykNCg0KCXNlbGYuX19DYWxsYmFja3NbbmFtZV0JPSB7DQoJCVRpdGxlCQkJCT0gdGl0bGUsDQoJCURlZmF1bHQJCQkJPSBkZWZhdWx0LA0KCQlUaWNrc1BlclNlY29uZAkJPSBkZWZhdWx0LA0KCQlMYXN0Q2xvY2sJCQk9IDAsDQoJCUNhbGxiYWNrCQkJPSBjYWxsYmFjaywNCgl9DQoNCmVuZA0KDQpmdW5jdGlvbiBUaWNrTWFuYWdlcjpMb2FkVG9NZW51KGNvbmZpZykNCg0KCWNvbmZpZzpUb2dnbGUoIkVuYWJsZWQiLCAiRW5hYmxlIFRpY2sgTWFuYWdlciIsIGZhbHNlKQ0KCWNvbmZpZzpUb2dnbGUoIlJlc2V0IiwgIlJlc2V0IFRQUyBWYWx1ZXMiLCBmYWxzZSkNCgljb25maWc6U2VwYXJhdG9yKCkNCgljb25maWc6Tm90ZSgiVmFsdWUgZXF1YWxzIFRpY2tzL1NlY29uZCAoVFBTKS4iKQ0KCWNvbmZpZzpOb3RlKCJSZWNvbW1lbmRlZCBkcmF3IHJlZnJlc2ggcmF0ZSBpcyA4MC4iKQ0KCWNvbmZpZzpTZXBhcmF0b3IoKQ0KCQ0KCWZvciBuYW1lLCBkYXRhIGluIHBhaXJzKHNlbGYuX19DYWxsYmFja3MpIGRvDQoJCWNvbmZpZzpTbGlkZXIoRm9ybWF0KCJDYWxsYmFja3sxfSIsIG5hbWUpLCBkYXRhLlRpdGxlLCBkYXRhLlRpY2tzUGVyU2Vjb25kLCAxLCAxMDApDQoJZW5kDQoJDQoJY29uZmlnLlJlc2V0CT0gZmFsc2UNCglzZWxmLl9fQ29uZmlnCQk9IGNvbmZpZw0KDQplbmQNCg0KZnVuY3Rpb24gVGlja01hbmFnZXI6SXNSZWFkeShuYW1lKQ0KDQoJbG9jYWwgdGltZXIJCT0gR2V0R2FtZVRpbWVyKCkNCglsb2NhbCBkYXRhCQk9IHNlbGYuX19DYWxsYmFja3NbbmFtZV0NCgkNCglpZiAodGltZXIgPD0gKGRhdGEuTGFzdENsb2NrICsgKDEgLyBkYXRhLlRpY2tzUGVyU2Vjb25kKSkpIHRoZW4NCgkJcmV0dXJuIGZhbHNlDQoJZW5kDQoJDQoJZGF0YS5MYXN0Q2xvY2sJPSB0aW1lcg0KCXJldHVybiB0cnVlDQoNCmVuZA0KDQpmdW5jdGlvbiBUaWNrTWFuYWdlcjpSZXNldFZhbHVlcygpDQoJDQoJZm9yIG5hbWUsIGRhdGEgaW4gcGFpcnMoc2VsZi5fX0NhbGxiYWNrcykgZG8NCgkJc2VsZi5fX0NvbmZpZ1tGb3JtYXQoIkNhbGxiYWNrezF9IiwgbmFtZSldID0gZGF0YS5EZWZhdWx0DQoJZW5kDQoJDQoJc2VsZi5fX0NvbmZpZzpzYXZlKCkNCg0KZW5kDQoNCmZ1bmN0aW9uIFRpY2tNYW5hZ2VyOl9fT25Mb2FkKCkNCgkNCglBZGRUaWNrQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOl9fT25UaWNrKCkgZW5kKQ0KCUFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6X19PbkRyYXcoKSBlbmQpDQoNCmVuZA0KDQpmdW5jdGlvbiBUaWNrTWFuYWdlcjpfX09uVGljaygpDQoNCglpZiAoc2VsZi5fX0NvbmZpZyBhbmQgc2VsZi5fX0NvbmZpZy5SZXNldCkgdGhlbg0KCQlEZWxheUFjdGlvbihmdW5jdGlvbigpDQoJCQlzZWxmOlJlc2V0VmFsdWVzKCkNCgkJCXNlbGYuX19Db25maWcuUmVzZXQgPSBmYWxzZQ0KCQllbmQsIDAuMSkNCgkJcmV0dXJuDQoJZW5kDQoNCglmb3IgbmFtZSwgZGF0YSBpbiBwYWlycyhzZWxmLl9fQ2FsbGJhY2tzKSBkbw0KCQlpZiAoc2VsZi5fX0NvbmZpZykgdGhlbg0KCQkJZGF0YS5UaWNrc1BlclNlY29uZCA9IHNlbGYuX19Db25maWdbRm9ybWF0KCJDYWxsYmFja3sxfSIsIG5hbWUpXQ0KCQllbmQNCgkJaWYgKGRhdGEuQ2FsbGJhY2sgYW5kIChub3Qgc2VsZi5fX0NvbmZpZyBvciBub3Qgc2VsZi5fX0NvbmZpZy5FbmFibGVkIG9yIHNlbGY6SXNSZWFkeShuYW1lKSkpIHRoZW4NCgkJCWRhdGE6Q2FsbGJhY2soKQ0KCQllbmQNCgllbmQNCg0KZW5kDQoNCmZ1bmN0aW9uIFRpY2tNYW5hZ2VyOl9fT25EcmF3KCkNCg0KCWxvY2FsIGRhdGEgPSBzZWxmLl9fQ2FsbGJhY2tzWyJEcmF3Il0NCglpZiAobm90IHNlbGYuX19Db25maWcgb3Igbm90IHNlbGYuX19Db25maWcuRW5hYmxlZCBvciBzZWxmOklzUmVhZHkoIkRyYXciKSkgdGhlbg0KCQlEcmF3TWFuYWdlcjpfX0RyYXcoKQ0KCWVuZA0KDQplbmQNCg0KVGlja01hbmFnZXIgPSBUaWNrTWFuYWdlcigpDQoNCi0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IFNjcmlwdE1hbmFnZXIgQ2xhc3MJCQkJCQkJCXx8LS0NCi0tLVw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KDQpjbGFzcygiU2NyaXB0TWFuYWdlciIpDQoNCmZ1bmN0aW9uIFNjcmlwdE1hbmFnZXI6X19pbml0KCkNCg0KCUFkZExvYWRDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6X19PbkxvYWQoKSBlbmQpDQoNCmVuZA0KDQpmdW5jdGlvbiBTY3JpcHRNYW5hZ2VyOl9fR2V0V2ViUmVzdWx0KGhvc3QsIHBhdGgpDQoNCglsb2NhbCByZXN1bHQgPSBHZXRXZWJSZXN1bHQoaG9zdCwgcGF0aCkNCgkNCglpZiAocmVzdWx0IGFuZCAoI3Jlc3VsdCA+IDApKSB0aGVuDQoJCWlmIChob3N0OmVxdWFscygicmF3LmdpdGh1Yi5jb20iKSkgdGhlbg0KCQkJaWYgKG5vdCByZXN1bHQ6ZXF1YWxzKCJOb3QgRm91bmQiKSkgdGhlbg0KCQkJCXJldHVybiByZXN1bHQ6c3ViKDEsICNyZXN1bHQgLSAxKQ0KCQkJZW5kDQoJCWVsc2UNCgkJCXJldHVybiByZXN1bHQNCgkJZW5kDQoJZW5kDQoJDQoJcmV0dXJuIG5pbA0KDQplbmQNCg0KZnVuY3Rpb24gU2NyaXB0TWFuYWdlcjpfX0dldEFzeW5jV2ViUmVzdWx0KGhvc3QsIHBhdGgsIGNhbGxiYWNrKQ0KDQoJR2V0QXN5bmNXZWJSZXN1bHQoaG9zdCwgcGF0aCwgZnVuY3Rpb24ocmVzdWx0KQ0KCQlpZiAocmVzdWx0IGFuZCAoI3Jlc3VsdCA+IDApKSB0aGVuDQoJCQlpZiAoaG9zdDplcXVhbHMoInJhdy5naXRodWIuY29tIikpIHRoZW4NCgkJCQlpZiAobm90IHJlc3VsdDplcXVhbHMoIk5vdCBGb3VuZCIpKSB0aGVuDQoJCQkJCWNhbGxiYWNrKHJlc3VsdDpzdWIoMSwgI3Jlc3VsdCAtIDEpKQ0KCQkJCWVuZA0KCQkJZWxzZQ0KCQkJCWNhbGxiYWNrKHJlc3VsdCkNCgkJCWVuZA0KCQllbmQNCgllbmQpDQoNCmVuZA0KDQpmdW5jdGlvbiBTY3JpcHRNYW5hZ2VyOl9fQ2hlY2tMYXRlc3RMaWJyYXJ5VmVyc2lvbigpDQoNCglsb2NhbCBsYXRlc3QgPSBzZWxmOl9fR2V0V2ViUmVzdWx0KFVwZGF0ZUhvc3QsIEZvcm1hdCgiezF9ezJ9IiwgVXBkYXRlUGF0aDpnZm9ybWF0KCJHb2RMaWIiKSwgVXBkYXRlVmVyc2lvbikpDQoJDQoJaWYgKGxhdGVzdCBhbmQgKHRvbnVtYmVyKGxhdGVzdCkgPiB0b251bWJlcihMaWJyYXJ5VmVyc2lvbikpKSB0aGVuDQoJCVByaW50TG9jYWwoIk5ldyBHb2RMaWIgdmVyc2lvbiBhdmFpbGFibGUsIHVwZGF0aW5nLi4uIikNCgkJRG93bmxvYWRGaWxlKEZvcm1hdCgiezF9ezJ9ezN9IiwgVXBkYXRlSG9zdCwgVXBkYXRlUGF0aDpnZm9ybWF0KCJHb2RMaWIiKSwgVXBkYXRlU2NyaXB0KSwgRm9ybWF0KCJ7MX1Hb2RMaWIubHVhIiwgTElCX1BBVEgpLCBmdW5jdGlvbigpDQoJCQlQcmludExvY2FsKEZvcm1hdCgiVXBkYXRlZCBHb2RMaWIgdG8gdnsxfSEgUGxlYXNlIHJlbG9hZCBzY3JpcHQgKGRvdWJsZSBGOSkuIiwgbGF0ZXN0KSkNCgkJZW5kKQ0KCQlyZXR1cm4gZmFsc2UNCgllbmQNCgkNCglyZXR1cm4gdHJ1ZQ0KDQplbmQNCg0KZnVuY3Rpb24gU2NyaXB0TWFuYWdlcjpfX0NoZWNrTGF0ZXN0U2NyaXB0VmVyc2lvbigpDQoNCglpZiAobm90IFNjcmlwdE5hbWUpIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoNCglsb2NhbCBsYXRlc3QgPSBzZWxmOl9fR2V0V2ViUmVzdWx0KFVwZGF0ZUhvc3QsIEZvcm1hdCgiezF9ezJ9IiwgVXBkYXRlUGF0aDpnZm9ybWF0KFNjcmlwdE5hbWUpLCBVcGRhdGVWZXJzaW9uKSkNCgkNCglpZiAobGF0ZXN0IGFuZCAodG9udW1iZXIobGF0ZXN0KSA+IHRvbnVtYmVyKFNjcmlwdFZlcnNpb24pKSkgdGhlbg0KCQlQcmludExvY2FsKCJOZXcgc2NyaXB0IHZlcnNpb24gYXZhaWxhYmxlLCB1cGRhdGluZy4uLiIpDQoJCURvd25sb2FkRmlsZShGb3JtYXQoInsxfXsyfXszfSIsIFVwZGF0ZUhvc3QsIFVwZGF0ZVBhdGg6Z2Zvcm1hdChTY3JpcHROYW1lKSwgVXBkYXRlU2NyaXB0KSwgRm9ybWF0KCJ7MX17Mn0ubHVhIiwgU0NSSVBUX1BBVEgsIEZJTEVfTkFNRSksIGZ1bmN0aW9uKCkNCgkJCVByaW50TG9jYWwoRm9ybWF0KCJVcGRhdGVkIHNjcmlwdCB0byB2ezF9ISBQbGVhc2UgcmVsb2FkIHNjcmlwdCAoZG91YmxlIEY5KS4iLCBsYXRlc3QpKQ0KCQllbmQpDQoJCXJldHVybiBmYWxzZQ0KCWVuZA0KCQ0KCXJldHVybiB0cnVlDQoNCmVuZA0KDQpmdW5jdGlvbiBTY3JpcHRNYW5hZ2VyOl9fTG9hZFJlcXVpcmVkTGlicmFyaWVzKCkNCg0KCWxvY2FsIG1pc3NpbmcJPSBmYWxzZQ0KCWxvY2FsIGRvd25sb2FkCT0gMA0KCQ0KCWZvciBsaWJyYXJ5LCB1cmwgaW4gcGFpcnMoUmVxdWlyZWRMaWJyYXJpZXMpIGRvDQoJCWxvY2FsIHBhdGggPSBGb3JtYXQoInsxfXsyfS5sdWEiLCBMSUJfUEFUSCwgbGlicmFyeSkNCgkJaWYgKG5vdCBGaWxlRXhpc3QocGF0aCkpIHRoZW4NCgkJCW1pc3NpbmcgPSB0cnVlDQoJCQlkb3dubG9hZCA9IGRvd25sb2FkICsgMQ0KCQkJRG93bmxvYWRGaWxlKHVybCwgcGF0aCwgZnVuY3Rpb24oKQ0KCQkJCWRvd25sb2FkID0gZG93bmxvYWQgLSAxDQoJCQkJaWYgKGRvd25sb2FkID09IDApIHRoZW4NCgkJCQkJUHJpbnRMb2NhbCgiUmVxdWlyZWQgbGlicmFyaWVzIGRvd25sb2FkIHN1Y2Nlc3NmdWxseSEgUGxlYXNlIHJlbG9hZCBzY3JpcHQgKGRvdWJsZSBGOSkuIikNCgkJCQllbmQNCgkJCWVuZCkNCgkJZW5kDQoJZW5kDQoJDQoJaWYgKG1pc3NpbmcpIHRoZW4NCgkJUHJpbnRMb2NhbCgiRG93bmxvYWRpbmcgcmVxdWlyZWQgbGlicmFyaWVzLCBwbGVhc2Ugd2FpdC4uLiIpDQoJCXJldHVybiBmYWxzZQ0KCWVuZA0KCQ0KCWZvciBsaWJyYXJ5LCBfIGluIHBhaXJzKFJlcXVpcmVkTGlicmFyaWVzKSBkbw0KCQlyZXF1aXJlKGxpYnJhcnkpDQoJZW5kDQoJDQoJcmV0dXJuIHRydWUNCg0KZW5kDQoNCmZ1bmN0aW9uIFNjcmlwdE1hbmFnZXI6X19DaGVja0dvZExpc3QoKQ0KDQoJbG9jYWwgdXNlcm5hbWUJPSBHZXRVc2VyKCkNCglsb2NhbCBsaXN0IAkJPSBzZWxmOl9fR2V0V2ViUmVzdWx0KFNlcnZlckhvc3QsIEZvcm1hdCgiezF9ezJ9IiwgU2VydmVyUGF0aDpnZm9ybWF0KCJHb2RMaWIiKSwgU2VydmVyR29kTGlzdCkpDQoJDQoJaWYgKGxpc3QpIHRoZW4NCgkJbGlzdCA9IEJhc2U2NERlY29kZShsaXN0KQ0KCQlsaXN0ID0gbGlzdDpzcGxpdCgiOyIpDQoJZWxzZQ0KCQlyZXR1cm4gZmFsc2UNCgllbmQNCgkNCglmb3IgXywgbmFtZSBpbiBpcGFpcnMobGlzdCkgZG8NCgkJaWYgKG5hbWU6ZXF1YWxzKHVzZXJuYW1lKSkgdGhlbg0KCQkJUHJpbnRMb2NhbCgiV2VsY29tZSBHb2QhIikNCgkJCUlzR29kID0gdHJ1ZQ0KCQkJcmV0dXJuIHRydWUNCgkJZW5kDQoJZW5kDQoJDQoJcmV0dXJuIGZhbHNlDQoJDQplbmQNCg0KZnVuY3Rpb24gU2NyaXB0TWFuYWdlcjpfX0NoZWNrV2hpdGVMaXN0KCkNCg0KCWxvY2FsIGxpc3QgCQkJPSBzZWxmOl9fR2V0V2ViUmVzdWx0KFNlcnZlckhvc3QsIEZvcm1hdCgiezF9ezJ9IiwgU2VydmVyUGF0aDpnZm9ybWF0KCJHb2RMaWIiKSwgU2VydmVyV2hpdGVMaXN0KSkNCglsb2NhbCB3aGl0ZWxpc3QJCT0geyB9DQoJbG9jYWwgd2hpdGVsaXN0ZWQJPSBmYWxzZQ0KCWxvY2FsIHNlcnZlcgkJPSBHZXRMb2NhbGl6YXRpb24oKTp1cHBlcigpDQoJDQoJaWYgKGxpc3QpIHRoZW4NCgkJYXNzZXJ0KGxvYWQoQmFzZTY0RGVjb2RlKGxpc3QpLCBuaWwsICJ0IiwgX0VOVikpKCkNCgllbHNlDQoJCVByaW50TG9jYWwoIkVycm9yIGxvYWRpbmcgd2hpdGUtbGlzdCwgcGxlYXNlIHJlbG9hZCBzY3JpcHQgKGRvdWJsZSBGOSkhIiwgTWVzc2FnZVR5cGUuRXJyb3IpDQoJCXJldHVybiBmYWxzZQ0KCWVuZA0KCQ0KCWlmIChXaGl0ZUxpc3Rbc2VydmVyXSkgdGhlbg0KCQlsb2NhbCBwbGF5ZXJzID0gV2hpdGVMaXN0W3NlcnZlcl0NCgkJZm9yIF8sIHBsYXllciBpbiBpcGFpcnMocGxheWVycykgZG8NCgkJCWlmIChteUhlcm8ubmFtZTplcXVhbHMocGxheWVyKSkgdGhlbg0KCQkJCXdoaXRlbGlzdGVkID0gdHJ1ZQ0KCQkJZW5kDQoJCWVuZA0KCQlmb3IgXywgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQoJCQlmb3IgXywgcGxheWVyIGluIGlwYWlycyhwbGF5ZXJzKSBkbw0KCQkJCWlmIChlbmVteS5uYW1lOmVxdWFscyhwbGF5ZXIpKSB0aGVuDQoJCQkJCXRhYmxlLmluc2VydChlbmVteS5uYW1lKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQ0KCWlmICgjd2hpdGVsaXN0ID4gMCkgdGhlbg0KCQlpZiAoSXNHb2QpIHRoZW4NCgkJCWxvY2FsIG1lc3NhZ2UgPSAiVGhlIGZvbGxvd2luZyB3aGl0ZS1saXN0ZWQgcGxheWVycyBoYXZlIGJlZW4gZm91bmQgb24gdGhlIGVuZW15IHRlYW06ICINCgkJCWZvciBpbmRleCA9IDEsICN3aGl0ZWxpc3QgZG8NCgkJCQlsb2NhbCBwbGF5ZXIgPSB3aGl0ZWxpc3RbaW5kZXhdDQoJCQkJaWYgKGluZGV4ID09ICN3aGl0ZWxpc3QpIHRoZW4NCgkJCQkJbWVzc2FnZSA9IEZvcm1hdCgiezF9ezJ9IiwgbWVzc2FnZSwgcGxheWVyKQ0KCQkJCWVsc2UNCgkJCQkJbWVzc2FnZSA9IEZvcm1hdCgiezF9ezF9LCAiLCBtZXNzYWdlLCBwbGF5ZXIpDQoJCQkJZW5kDQoJCQllbmQNCgkJCVByaW50TG9jYWwobWVzc2FnZSkNCgkJZWxzZWlmIChub3Qgd2hpdGVsaXN0ZWQpIHRoZW4NCgkJCVByaW50TG9jYWwoIkEgd2hpdGUtbGlzdGVkIHBsYXllciBoYXMgYmVlbiBmb3VuZCBvbiB0aGUgZW5lbXkgdGVhbSEgVGhpcyBzY3JpcHQgd2lsbCBub3cgY2xvc2UuIiwgTWVzc2FnZVR5cGUuRXJyb3IpDQoJCQlEZWxheUFjdGlvbihmdW5jdGlvbigpDQoJCQkJU2VuZENoYXQoIi9hbGwgU29ycnkhIEkgd2lsbCB0cnkgaGFyZGVyIHRoaXMgZ2FtZS4iKQ0KCQkJZW5kLCAxMCkNCgkJCXJldHVybiBmYWxzZQ0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gdHJ1ZQ0KDQplbmQNCg0KZnVuY3Rpb24gU2NyaXB0TWFuYWdlcjpfX0NoZWNrQmxhY2tMaXN0KCkNCg0KCWlmIChJc0dvZCkgdGhlbg0KCQlyZXR1cm4gdHJ1ZQ0KCWVuZA0KDQoJbG9jYWwgbGlzdCAJCQk9IHNlbGY6X19HZXRXZWJSZXN1bHQoU2VydmVySG9zdCwgRm9ybWF0KCJ7MX17Mn0iLCBTZXJ2ZXJQYXRoOmdmb3JtYXQoIkdvZExpYiIpLCBTZXJ2ZXJCbGFja0xpc3QpKQ0KCWxvY2FsIHNlcnZlcgkJPSBHZXRMb2NhbGl6YXRpb24oKTp1cHBlcigpDQoJDQoJaWYgKGxpc3QpIHRoZW4NCgkJbGlzdCA9IEJhc2U2NERlY29kZShsaXN0KQ0KCQlsaXN0ID0gbGlzdDpzcGxpdCgiOyIpDQoJZWxzZQ0KCQlQcmludExvY2FsKCJFcnJvciBsb2FkaW5nIGJsYWNrLWxpc3QsIHBsZWFzZSByZWxvYWQgc2NyaXB0IChkb3VibGUgRjkpISIsIE1lc3NhZ2VUeXBlLkVycm9yKQ0KCQlyZXR1cm4gZmFsc2UNCgllbmQNCgkNCglmb3IgXywgcGxheWVyIGluIGlwYWlycyhsaXN0KSBkbw0KCQlpZiAobXlIZXJvLm5hbWU6ZXF1YWxzKHBsYXllcikpIHRoZW4NCgkJCVByaW50TG9jYWwoIllvdSBoYXZlIGJlZW4gZGVuaWVkIGFjY2VzcyB0byBteSBzY3JpcHRzISBQbGVhc2UgUE0gXCJEZXZuXCIgZm9yIG1vcmUgaW5mb3JtYXRpb24uIiwgTWVzc2FnZVR5cGUuRXJyb3IpDQoJCQlyZXR1cm4gZmFsc2UNCgkJZW5kDQoJZW5kDQoJDQoJcmV0dXJuIHRydWUNCg0KZW5kDQoNCmZ1bmN0aW9uIFNjcmlwdE1hbmFnZXI6X19DaGVja0FjY2VzcygpDQoNCglpZiAoSXNHb2Qgb3Igbm90IENsb3NlZEFjY2VzcykgdGhlbg0KCQlyZXR1cm4gdHJ1ZQ0KCWVuZA0KCQ0KCWxvY2FsIGxpc3QgCQkJPSBzZWxmOl9fR2V0V2ViUmVzdWx0KFNlcnZlckhvc3QsIEZvcm1hdCgiezF9ezJ9IiwgU2VydmVyUGF0aDpnZm9ybWF0KENoYW1waW9uTmFtZSksIFNlcnZlckF1dGhlbnRpY2F0aW9uKSkNCgkNCglpZiAobGlzdCkgdGhlbg0KCQlsaXN0ID0gQmFzZTY0RGVjb2RlKGxpc3QpDQoJCWxpc3QgPSBsaXN0OnNwbGl0KCI7IikNCgllbHNlDQoJCVByaW50TG9jYWwoIkVycm9yIGxvYWRpbmcgYXV0aGVudGljYXRpb24tbGlzdCwgcGxlYXNlIHJlbG9hZCBzY3JpcHQgKGRvdWJsZSBGOSkhIiwgTWVzc2FnZVR5cGUuRXJyb3IpDQoJCXJldHVybiBmYWxzZQ0KCWVuZA0KDQoJZm9yIF8sIHBsYXllciBpbiBpcGFpcnMobGlzdCkgZG8NCgkJaWYgKG15SGVyby5uYW1lOmVxdWFscyhwbGF5ZXIpKSB0aGVuDQoJCQlQcmludExvY2FsKCJZb3UgaGF2ZSBub3QgYmVlbiBhdXRob3JpemVkIHRvIHJ1biB0aGlzIHNjcmlwdCEiLCBNZXNzYWdlVHlwZS5FcnJvcikNCgkJCXJldHVybiBmYWxzZQ0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gdHJ1ZQ0KCQ0KZW5kDQoNCmZ1bmN0aW9uIFNjcmlwdE1hbmFnZXI6X19TZXR1cFZhcmlhYmxlcygpDQoNCglQcmVkaWN0aW9uCQk9IFZQcmVkaWN0aW9uKCkNCgkNCglKdW5nbGVNaW5pb25zCT0geyAiU1JVX1Jhem9yYmVhayIsICJTUlVfS3J1ZyIsICJTcnVfQ3JhYiIsICJTUlVfQmFyb24iLCAiU1JVX0RyYWdvbiIsICJTUlVfQmx1ZSIsICJTUlVfUmVkIiwgIlNSVV9NdXJrd29sZiIsICJTUlVfR3JvbXAiIH0NCg0KZW5kDQoNCmZ1bmN0aW9uIFNjcmlwdE1hbmFnZXI6X19Mb2FkU2NyaXB0KCkNCg0KCUNhbGxiYWNrczpDYWxsKCJPdmVycmlkZXMiKQ0KCXNlbGY6X19TZXR1cFZhcmlhYmxlcygpCQ0KCUNhbGxiYWNrczpDYWxsKCJJbml0aWFsaXplIikNCgkNCglzZWxmOl9fR2V0QXN5bmNXZWJSZXN1bHQoVXBkYXRlSG9zdCwgRm9ybWF0KCJ7MX17Mn0iLCBVcGRhdGVQYXRoOmdmb3JtYXQoQ2hhbXBpb25OYW1lKSwgVXBkYXRlTWVzc2FnZSksIGZ1bmN0aW9uKG1lc3NhZ2UpDQoJCVByaW50TG9jYWwobWVzc2FnZSkNCgllbmQpDQoJDQoJUHJpbnRMb2NhbChGb3JtYXQoIlNjcmlwdCB2ezF9IGxvYWRlZCBzdWNjZXNzZnVsbHkhIiwgU2NyaXB0VmVyc2lvbikpDQoJQ2FsbGJhY2tzOl9fT25Mb2FkKCkNCg0KZW5kDQoNCmZ1bmN0aW9uIFNjcmlwdE1hbmFnZXI6X19PbkxvYWQoKQ0KDQoJaWYgKG5vdCBzZWxmOl9fQ2hlY2tMYXRlc3RMaWJyYXJ5VmVyc2lvbigpKSB0aGVuDQoJCXJldHVybg0KCWVuZA0KDQoJaWYgKG5vdCBzZWxmOl9fQ2hlY2tMYXRlc3RTY3JpcHRWZXJzaW9uKCkpIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoNCglpZiAobm90IHNlbGY6X19Mb2FkUmVxdWlyZWRMaWJyYXJpZXMoKSkgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglzZWxmOl9fQ2hlY2tHb2RMaXN0KCkNCgkNCglpZiAobm90IHNlbGY6X19DaGVja1doaXRlTGlzdCgpKSB0aGVuDQoJCXJldHVybg0KCWVuZA0KCQ0KCWlmIChub3Qgc2VsZjpfX0NoZWNrQmxhY2tMaXN0KCkpIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJaWYgKG5vdCBzZWxmOl9fQ2hlY2tBY2Nlc3MoKSkgdGhlbg0KCQlyZXR1cm4NCgllbmQNCgkNCglzZWxmOl9fTG9hZFNjcmlwdCgpDQoJDQplbmQNCg0KU2NyaXB0TWFuYWdlciA9IFNjcmlwdE1hbmFnZXIoKQ0KDQotLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBNZW51Q29uZmlnIENsYXNzCQkJCQkJCQkJfHwtLQ0KLS0tXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQoNCmZ1bmN0aW9uIE1lbnVDb25maWcobmFtZSwgdGl0bGUpDQoJDQoJcmV0dXJuIHNjcmlwdENvbmZpZyh0aXRsZSwgRm9ybWF0KCJHb2RTY3JpcHR7MX0iLCBuYW1lKSkNCg0KZW5kDQoNCmZ1bmN0aW9uIHNjcmlwdENvbmZpZzpNZW51KG5hbWUsIHRpdGxlKQ0KDQoJcmV0dXJuIHNlbGY6YWRkU3ViTWVudSh0aXRsZSwgbmFtZSkNCg0KZW5kDQoNCmZ1bmN0aW9uIHNjcmlwdENvbmZpZzpTZXBhcmF0b3IoKQ0KDQoJcmV0dXJuIHNlbGY6YWRkUGFyYW0oIm5pbCIsICItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKQ0KDQplbmQNCg0KZnVuY3Rpb24gc2NyaXB0Q29uZmlnOkluZm8oaW5mbywgdmFsdWUpDQoNCglpZiAodHlwZSh2YWx1ZSkgfj0gInN0cmluZyIpIHRoZW4NCgkJdmFsdWUgPSB0b3N0cmluZyh2YWx1ZSkNCgllbmQNCgkNCglyZXR1cm4gc2VsZjphZGRQYXJhbShGb3JtYXQoIkluZm97MX0iLCBpbmZvOmdzdWIoIiAiLCAiIikpLCBGb3JtYXQoInsxfToiLCBpbmZvKSwgU0NSSVBUX1BBUkFNX0lORk8sIHZhbHVlKQ0KDQplbmQNCg0KZnVuY3Rpb24gc2NyaXB0Q29uZmlnOk5vdGUobm90ZSkNCg0KCXJldHVybiBzZWxmOmFkZFBhcmFtKCJuaWwiLCBGb3JtYXQoIk5vdGU6IHsxfSIsIG5vdGUpLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpDQoNCmVuZA0KDQpmdW5jdGlvbiBzY3JpcHRDb25maWc6VG9nZ2xlKG5hbWUsIHRpdGxlLCBkZWZhdWx0KQ0KDQoJcmV0dXJuIHNlbGY6YWRkUGFyYW0obmFtZSwgdGl0bGUsIFNDUklQVF9QQVJBTV9PTk9GRiwgZGVmYXVsdCkNCg0KZW5kDQoNCmZ1bmN0aW9uIHNjcmlwdENvbmZpZzpEcm9wRG93bihuYW1lLCB0aXRsZSwgZGVmYXVsdCwgbGlzdCkNCg0KCXJldHVybiBzZWxmOmFkZFBhcmFtKG5hbWUsIEZvcm1hdCgiezF9OiIsIHRpdGxlKSwgU0NSSVBUX1BBUkFNX0xJU1QsIGRlZmF1bHQsIGxpc3QpDQoNCmVuZA0KDQpmdW5jdGlvbiBzY3JpcHRDb25maWc6U2xpZGVyKG5hbWUsIHRpdGxlLCBkZWZhdWx0LCBtaW5pbnVtLCBtYXhpbXVtKQ0KDQoJcmV0dXJuIHNlbGY6YWRkUGFyYW0obmFtZSwgRm9ybWF0KCJ7MX06IiwgdGl0bGUpLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIGRlZmF1bHQsIG1pbmludW0sIG1heGltdW0pDQoNCmVuZA0KDQpmdW5jdGlvbiBzY3JpcHRDb25maWc6S2V5QmluZGluZyhuYW1lLCB0aXRsZSwgZGVmYXVsdCwga2V5KQ0KDQoJaWYgKHR5cGUoa2V5KSA9PSAic3RyaW5nIikgdGhlbg0KCQlrZXkgPSBzdHJpbmcuYnl0ZShrZXkpDQoJZW5kDQoNCglyZXR1cm4gc2VsZjphZGRQYXJhbShuYW1lLCB0aXRsZSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZGVmYXVsdCwga2V5KQ0KDQplbmQNCg0KZnVuY3Rpb24gc2NyaXB0Q29uZmlnOktleVRvZ2dsZShuYW1lLCB0aXRsZSwgZGVmYXVsdCwga2V5KQ0KDQoJaWYgKHR5cGUoa2V5ID09ICJzdHJpbmciKSkgdGhlbg0KCQlrZXkgPSBzdHJpbmcuYnl0ZShrZXkpDQoJZW5kDQoNCglyZXR1cm4gc2VsZjphZGRQYXJhbShuYW1lLCB0aXRsZSwgU0NSSVBUX1BBUkFNX09OS0VZVE9HR0xFLCBkZWZhdWx0LCBrZXkpDQoNCmVuZA0KDQotLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBQbGF5ZXIgQ2xhc3MJCQkJCQkJCQkJfHwtLQ0KLS0tXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQoNCmNsYXNzKCJQbGF5ZXIiKQ0KDQpmdW5jdGlvbiBQbGF5ZXI6X19pbml0KCkNCg0KCXNlbGYuSXNBdHRhY2tpbmcJCT0gZmFsc2UNCg0KCXNlbGYuX19CYXNlV2luZFVwVGltZQk9IDMNCgkNCglDYWxsYmFja3M6QmluZCgiUHJvY2Vzc1NwZWxsIiwgZnVuY3Rpb24odW5pdCwgc3BlbGwpIHNlbGY6X19PblByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkgZW5kKQ0KDQplbmQNCg0KZnVuY3Rpb24gUGxheWVyOkdldFdpbmRVcFRpbWUoKQ0KDQoJcmV0dXJuICgxIC8gKHNlbGY6R2V0QXR0YWNrU3BlZWQoKSAqIHNlbGYuX19CYXNlV2luZFVwVGltZSkpDQoNCmVuZA0KDQpmdW5jdGlvbiBQbGF5ZXI6R2V0QXR0YWNrU3BlZWQoKQ0KDQoJcmV0dXJuIG15SGVyby5hdHRhY2tTcGVlZA0KDQplbmQNCg0KZnVuY3Rpb24gUGxheWVyOkdldFJhbmdlKHRhcmdldCkNCg0KCWxvY2FsIHJhbmdlID0gbXlIZXJvLnJhbmdlICsgbXlIZXJvLmJvdW5kaW5nUmFkaXVzIC0gMTUNCgkNCglpZiAodGFyZ2V0IGFuZCBWYWxpZFRhcmdldCh0YXJnZXQpKSB0aGVuDQoJCXJhbmdlID0gcmFuZ2UgKyB0YXJnZXQuYm91bmRpbmdSYWRpdXMNCgllbmQNCgkNCglyZXR1cm4gcmFuZ2UNCg0KZW5kDQoNCmZ1bmN0aW9uIFBsYXllcjpDYW5BdHRhY2sodGFyZ2V0KQ0KDQoJDQoNCmVuZA0KDQpmdW5jdGlvbiBQbGF5ZXI6R2V0Q29vbGRvd25SZWR1Y3Rpb24oKQ0KDQoJcmV0dXJuIChteUhlcm8uY2RyICogLTEpDQoNCmVuZA0KDQpmdW5jdGlvbiBQbGF5ZXI6R2V0TGV2ZWwoKQ0KDQoJcmV0dXJuIG15SGVyby5sZXZlbA0KDQplbmQNCg0KZnVuY3Rpb24gUGxheWVyOkluQXR0YWNrUmFuZ2UodW5pdCkNCg0KCXJldHVybiBJblJhbmdlKHVuaXQsIHNlbGY6R2V0UmFuZ2UodW5pdCkpDQoNCmVuZA0KDQpmdW5jdGlvbiBQbGF5ZXI6X19HZXRMYXRlbmN5KCkNCg0KCXJldHVybiAoR2V0TGF0ZW5jeSgpIC8gMjAwMCkNCg0KZW5kDQoNCmZ1bmN0aW9uIFBsYXllcjpfX09uUHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKQ0KDQoJaWYgKG5vdCAodW5pdC5pc01lIGFuZCBzcGVsbC5uYW1lOmxvd2VyKCk6ZmluZCgiYXR0YWNrIikpKSB0aGVuDQoJCXJldHVybg0KCWVuZA0KDQoJc2VsZi5Jc0F0dGFja2luZwkJPSB0cnVlDQoJc2VsZi5fX0Jhc2VXaW5kVXBUaW1lCT0gKDEgLyAoc3BlbGwud2luZFVwVGltZSAqIHNlbGY6R2V0QXR0YWNrU3BlZWQoKSkpDQoJDQoJQ2FsbGJhY2tzOkNhbGwoIkF0dGFjayIsIHNwZWxsLnRhcmdldCkNCgkNCglEZWxheUFjdGlvbihmdW5jdGlvbigpDQoJCXNlbGYuSXNBdHRhY2tpbmcgPSBmYWxzZQ0KCQlDYWxsYmFja3M6Q2FsbCgiQWZ0ZXJBdHRhY2siLCBzcGVsbC50YXJnZXQpDQoJZW5kLCAoc2VsZjpHZXRXaW5kVXBUaW1lKCkgKyBzZWxmOl9fR2V0TGF0ZW5jeSgpIC8gMjAwMCkpDQoJDQplbmQNCg0KUGxheWVyID0gUGxheWVyKCkNCg0KLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gU3BlbGxEYXRhIENsYXNzCQkJCQkJCQkJfHwtLQ0KLS0tXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQoNCmNsYXNzKCJTcGVsbERhdGEiKQ0KDQpmdW5jdGlvbiBTcGVsbERhdGE6X19pbml0KGtleSwgbmFtZSwgcmFuZ2UpDQoNCglzZWxmLktleQkJCQk9IGtleQ0KCXNlbGYuTmFtZQkJCQk9IG5hbWUNCglzZWxmLlJhbmdlCQkJCT0gcmFuZ2Ugb3IgMA0KCQ0KCXNlbGYuV2lkdGgJCQkJPSAwDQoJc2VsZi5EZWxheQkJCQk9IDANCglzZWxmLlNwZWVkCQkJCT0gMA0KCQ0KCXNlbGYuUmVhZHkJCQkJPSBmYWxzZQ0KCQ0KCXNlbGYuX19CYXNlCQkJCT0gU3BlbGwoc2VsZi5LZXksIHNlbGYuUmFuZ2UpDQoJc2VsZi5fX0Nhc3RDYWxsYmFja3MJPSB7IH0NCglzZWxmLl9fU2NyaXB0Q2FzdGluZwk9IGZhbHNlDQoJc2VsZi5fX0NvbmZpZwkJCT0gbmlsDQoNCmVuZA0KDQpmdW5jdGlvbiBTcGVsbERhdGE6U2V0U2tpbGxzaG90KHNraWxsc2hvdFR5cGUsIHdpZHRoLCBkZWxheSwgc3BlZWQsIGNvbGxpc2lvbikNCg0KCXNlbGYuV2lkdGgJCT0gd2lkdGggb3IgMA0KCXNlbGYuRGVsYXkJCT0gZGVsYXkgb3IgMA0KCXNlbGYuU3BlZWQJCT0gc3BlZWQgb3IgMA0KCXNlbGYuQ29sbGlzaW9uCT0gY29sbGlzaW9uIG9yIGZhbHNlDQoNCglzZWxmLl9fQmFzZTpTZXRTa2lsbHNob3QoUHJlZGljdGlvbiwgc2tpbGxzaG90VHlwZSwgd2lkdGgsIGRlbGF5LCBzcGVlZCwgY29sbGlzaW9uKQ0KDQplbmQNCg0KZnVuY3Rpb24gU3BlbGxEYXRhOkdldExldmVsKCkNCg0KCXJldHVybiBteUhlcm86R2V0U3BlbGxEYXRhKHNlbGYuS2V5KS5sZXZlbA0KDQplbmQNCg0KZnVuY3Rpb24gU3BlbGxEYXRhOklzUmVhZHkoKQ0KCQ0KCXNlbGYuUmVhZHkgPSAobXlIZXJvOkNhblVzZVNwZWxsKHNlbGYuS2V5KSA9PSBSRUFEWSkNCglyZXR1cm4gc2VsZi5SZWFkeQ0KDQplbmQNCg0KZnVuY3Rpb24gU3BlbGxEYXRhOkdldENvb2xkb3duKCkNCg0KCXJldHVybiBteUhlcm86R2V0U3BlbGxEYXRhKHNlbGYuS2V5KS5jZA0KDQplbmQNCg0KZnVuY3Rpb24gU3BlbGxEYXRhOkdldEN1cnJlbnRDb29sZG93bigpDQoNCglyZXR1cm4gbXlIZXJvOkdldFNwZWxsRGF0YShzZWxmLktleSkuY3VycmVudENkDQoNCmVuZA0KDQpmdW5jdGlvbiBTcGVsbERhdGE6R2V0Q29zdCgpDQoNCglyZXR1cm4gbXlIZXJvOkdldFNwZWxsRGF0YShzZWxmLktleSkubWFuYQ0KDQplbmQNCg0KZnVuY3Rpb24gU3BlbGxEYXRhOkdldE5hbWUoKQ0KDQoJcmV0dXJuIG15SGVybzpHZXRTcGVsbERhdGEoc2VsZi5LZXkpLm5hbWUNCg0KZW5kDQoNCmZ1bmN0aW9uIFNwZWxsRGF0YTpIYXZlRW5vdWdoTWFuYSgpDQoNCglyZXR1cm4gKG15SGVyby5tYW5hID49IHNlbGY6R2V0Q29zdCgpKQ0KDQplbmQNCg0KZnVuY3Rpb24gU3BlbGxEYXRhOkNhbkNhc3QoKQ0KDQoJcmV0dXJuIChzZWxmOklzUmVhZHkoKSBvciAoKHNlbGY6R2V0TGV2ZWwoKSA+IDApIGFuZCAoc2VsZjpHZXRDdXJyZW50Q29vbGRvd24oKSA8ICgwLjEzICsgR2V0TGF0ZW5jeSgpIC8gMjAwMCkpIGFuZCBzZWxmOkhhdmVFbm91Z2hNYW5hKCkpKQ0KDQplbmQNCg0KZnVuY3Rpb24gU3BlbGxEYXRhOlNldFNvdXJjZVBvc2l0aW9uKHBvc2l0aW9uKQ0KDQoJc2VsZi5fX0Jhc2U6U2V0U291cmNlUG9zaXRpb24ocG9zaXRpb24pDQoNCmVuZA0KDQpmdW5jdGlvbiBTcGVsbERhdGE6U2V0U3BlbGxOYW1lKG5hbWUpDQoNCglzZWxmLl9fTmFtZSA9IG5hbWUNCg0KZW5kDQoNCmZ1bmN0aW9uIFNwZWxsRGF0YTpJc1ZhbGlkKHRhcmdldCkNCg0KCXJldHVybiBJc1ZhbGlkKHRhcmdldCwgKHNlbGYuUmFuZ2UgKyAoc2VsZi5XaWR0aCAvIDIpKSkNCg0KZW5kDQoNCmZ1bmN0aW9uIFNwZWxsRGF0YTpJblJhbmdlKHRhcmdldCkNCg0KCXJldHVybiAoR2V0RGlzdGFuY2UodGFyZ2V0KSA8PSAoc2VsZi5SYW5nZSArIChzZWxmLldpZHRoIC8gMikpKQ0KDQplbmQNCg0KZnVuY3Rpb24gU3BlbGxEYXRhOkJpbmRDYXN0Q2FsbGJhY2soY2FsbGJhY2spDQoNCglpZiAoI3NlbGYuX19DYXN0Q2FsbGJhY2tzID09IDApIHRoZW4NCgkJQ2FsbGJhY2tzOkJpbmQoIlByb2Nlc3NTcGVsbCIsIGZ1bmN0aW9uKHVuaXQsIHNwZWxsKQ0KCQkJaWYgKHVuaXQuaXNNZSBhbmQgc3BlbGwubmFtZSkgdGhlbg0KCQkJCWlmICgobm90IHNlbGYuX19OYW1lIGFuZCAoc3BlbGwubmFtZSA9PSBzZWxmOkdldE5hbWUoKSkpIG9yIChzcGVsbC5uYW1lID09IHNlbGYuX19OYW1lKSkgdGhlbg0KCQkJCQlmb3IgXywgY2FsbGJhY2sgaW4gaXBhaXJzKHNlbGYuX19DYXN0Q2FsbGJhY2tzKSBkbw0KCQkJCQkJY2FsbGJhY2soc3BlbGwpDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZCkNCgllbmQNCgkNCgl0YWJsZS5pbnNlcnQoc2VsZi5fX0Nhc3RDYWxsYmFja3MsIGNhbGxiYWNrKQ0KDQplbmQNCg0KZnVuY3Rpb24gU3BlbGxEYXRhOkJpbmRVc2VyQ2FzdChjYWxsYmFjaykNCg0KCUNhbGxiYWNrczpCaW5kKCJTZW5kUGFja2V0IiwgZnVuY3Rpb24ocGFja2V0KQ0KCQktLVtbIE5ldyBwYWNrZXQgaGVhZGVyIGlzIDQ2Lg0KCQlpZiAocGFja2V0LmhlYWRlciA9PSAweERFKSB0aGVuDQoJCQlwYWNrZXQucG9zID0gMjYNCgkJCWxvY2FsIHNwZWxsSWQgPSBwYWNrZXQ6RGVjb2RlMSgpDQoJCQlpZiAoKHNwZWxsSWQgPT0gc2VsZi5LZXkpIGFuZCBub3Qgc2VsZi5TY3JpcHRDYXN0aW5nKSB0aGVuDQoJCQkJY2FsbGJhY2socGFja2V0LCBtb3VzZVBvcykNCgkJCWVuZA0KCQllbmQNCgkJLS1dXQ0KCWVuZCkNCg0KZW5kDQoNCmZ1bmN0aW9uIFNwZWxsRGF0YTpMb2FkVG9NZW51KGNvbmZpZykNCg0KCWNvbmZpZzpUb2dnbGUoIlBhY2tldHMiLCAiVXNlIFBhY2tldHMgdG8gQ2FzdCBTcGVsbCIsIGZhbHNlKQ0KCQ0KCXNlbGYuX19Db25maWcgPSBjb25maWcNCg0KZW5kDQoNCmZ1bmN0aW9uIFNwZWxsRGF0YTpDYXN0KHBhcmFtMSwgcGFyYW0yKQ0KDQoJaWYgKHNlbGYuX19Db25maWcpIHRoZW4NCgkJc2VsZi5fX0Jhc2UucGFja2V0Q2FzdAk9IHNlbGYuX19Db25maWcuUGFja2V0cw0KCWVuZA0KDQoJc2VsZi5fX1NjcmlwdENhc3RpbmcgCT0gdHJ1ZQ0KCWxvY2FsIHJlc3VsdCAJCQk9IHNlbGYuX19CYXNlOkNhc3QocGFyYW0xLCBwYXJhbTIpDQoJDQoJaWYgKHJlc3VsdCA9PSBTUEVMTFNUQVRFX1RSSUdHRVJFRCkgdGhlbg0KCQlzZWxmLlJlYWR5ID0gZmFsc2UNCgllbmQNCgkNCglzZWxmLl9fU2NyaXB0Q2FzdGluZyAJPSBmYWxzZQ0KCXJldHVybiByZXN1bHQNCg0KZW5kDQoNCmZ1bmN0aW9uIFNwZWxsRGF0YTpDYXN0QXQodmVjdG9yKQ0KDQoJcmV0dXJuIHNlbGY6Q2FzdCh2ZWN0b3IueCwgdmVjdG9yLnopDQoNCmVuZA0KDQpmdW5jdGlvbiBTcGVsbERhdGE6Q2FzdElmSW1tb2JpbGUodGFyZ2V0KQ0KDQoJcmV0dXJuIHNlbGYuX19CYXNlOkNhc3RJZkltbW9iaWxlKHRhcmdldCkNCg0KZW5kDQoNCmZ1bmN0aW9uIFNwZWxsRGF0YTpHZXRQcmVkaWN0aW9uKHRhcmdldCkNCg0KCXJldHVybiBzZWxmLl9fQmFzZTpHZXRQcmVkaWN0aW9uKHRhcmdldCkNCg0KZW5kDQoNCi0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IFRhcmdldFNlbGVjdG9yIENsYXNzCQkJCQkJCQl8fC0tDQotLS1cPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCg0KY2xhc3MoIlByaW9yaXR5TWFuYWdlciIpDQoNCmZ1bmN0aW9uIFByaW9yaXR5TWFuYWdlcjpfX2luaXQoKQ0KDQoJc2VsZi5FbmVteUNvdW50CQkJPSAjR2V0RW5lbXlIZXJvZXMoKQ0KCQ0KCXNlbGYuX19Qcmlvcml0eVRhYmxlCT0gew0KCQlbIkFEQyJdCQkJCT0geyAiQXNoZSIsICJDYWl0bHluIiwgIkNvcmtpIiwgIkRyYXZlbiIsICJFenJlYWwiLCAiR3JhdmVzIiwgIkpheWNlIiwgIkppbngiLCAiS29nTWF3IiwgIkx1Y2lhbiIsICJNYXN0ZXJZaSIsICJNaXNzRm9ydHVuZSIsICJQYW50aGVvbiIsICJRdWlubiIsICJTaGFjbyIsICJTaXZpciIsICJUYWxvbiIsIlRyeW5kYW1lcmUiLCAiVHJpc3RhbmEiLCAiVHdpdGNoIiwgIlVyZ290IiwgIlZhcnVzIiwgIlZheW5lIiwgIllhc3VvIiwiWmVkIiB9LA0KCQlbIkFQQyJdCQkJCT0geyAiQW5uaWUiLCAiQWhyaSIsICJBa2FsaSIsICJBbml2aWEiLCAiQW5uaWUiLCAiQnJhbmQiLCAiQ2Fzc2lvcGVpYSIsICJEaWFuYSIsICJFdmVseW5uIiwgIkZpZGRsZVN0aWNrcyIsICJGaXp6IiwgIkdyYWdhcyIsICJIZWltZXJkaW5nZXIiLCAiS2FydGh1cyIsICJLYXNzYWRpbiIsICJLYXRhcmluYSIsICJLYXlsZSIsICJLZW5uZW4iLCAiTGVibGFuYyIsICJMaXNzYW5kcmEiLCAiTHV4IiwgIk1hbHphaGFyIiwgIk1vcmRla2Fpc2VyIiwgIk1vcmdhbmEiLCAiTmlkYWxlZSIsICJPcmlhbm5hIiwgIlJ5emUiLCAiU2lvbiIsICJTd2FpbiIsICJTeW5kcmEiLCAiVGVlbW8iLCAiVHdpc3RlZEZhdGUiLCAiVmVpZ2FyIiwgIlZpa3RvciIsICJWbGFkaW1pciIsICJYZXJhdGgiLCAiWmlnZ3MiLCAiWnlyYSIgfSwNCgkJWyJTdXBwb3J0Il0JCQk9IHsgIkFsaXN0YXIiLCAiQmxpdHpjcmFuayIsICJKYW5uYSIsICJLYXJtYSIsICJMZW9uYSIsICJMdWx1IiwgIk5hbWkiLCAiTnVudSIsICJTb25hIiwgIlNvcmFrYSIsICJUYXJpYyIsICJUaHJlc2giLCAiWmlsZWFuIiwgIkJyYXVtIiB9LA0KCQlbIkJydWlzZXIiXQkJCT0geyAiQWF0cm94IiwgIkRhcml1cyIsICJFbGlzZSIsICJGaW9yYSIsICJHYW5ncGxhbmsiLCAiR2FyZW4iLCAiSXJlbGlhIiwgIkphcnZhbklWIiwgIkpheCIsICJLaGF6aXgiLCAiTGVlU2luIiwgIk5vY3R1cm5lIiwgIk9sYWYiLCAiUG9wcHkiLCAiUmVuZWt0b24iLCAiUmVuZ2FyIiwgIlJpdmVuIiwgIlJ1bWJsZSIsICJTaHl2YW5hIiwgIlRydW5kbGUiLCAiVWR5ciIsICJWaSIsICJNb25rZXlLaW5nIiwgIlhpblpoYW8iIH0sDQoJCVsiVGFuayJdCQkJPSB7ICJBbXVtdSIsICJDaG9nYXRoIiwgIkRyTXVuZG8iLCAiR2FsaW8iLCAiSGVjYXJpbSIsICJNYWxwaGl0ZSIsICJNYW9rYWkiLCAiTmFzdXMiLCAiUmFtbXVzIiwgIlNlanVhbmkiLCAiTmF1dGlsdXMiLCAiU2hlbiIsICJTaW5nZWQiLCAiU2thcm5lciIsICJWb2xpYmVhciIsICJXYXJ3aWNrIiwgIllvcmljayIsICJaYWMiIH0NCgl9DQoJDQoJc2VsZi5fX1ByaW9yaXR5T3JkZXIJPSB7DQoJCVsxXQkJCQkJPSB7IDUsIDUsIDUsIDUsIDUgfSwNCiAgICAgICAgWzJdCQkJCQk9IHsgNSwgNSwgNCwgNCwgNCB9LA0KICAgICAgICBbM10JCQkJCT0geyA1LCA1LCA0LCAzLCAzIH0sDQoJCVs0XQkJCQkJPSB7IDUsIDQsIDMsIDIsIDIgfSwNCiAgICAgICAgWzVdCQkJCQk9IHsgNSwgNCwgMywgMiwgMSB9LA0KICAgIH0NCgkNCglzZWxmLl9fUHJpb3JpdHlJbmRleAk9IHsNCgkJWyJBREMiXQkJCQk9IDEsDQoJCVsiQVBDIl0JCQkJPSAyLA0KCQlbIlN1cHBvcnQiXQkJCT0gMywNCgkJWyJCcnVpc2VyIl0JCQk9IDQsDQoJCVsiVGFuayJdCQkJPSA1LA0KCX0NCg0KZW5kDQoNCmZ1bmN0aW9uIFByaW9yaXR5TWFuYWdlcjpHZXRSZWNvbW1lbmRlZFByaW9yaXR5KHRhcmdldCkNCg0KCWlmICh0YWJsZS5jb250YWlucyhzZWxmLl9fUHJpb3JpdHlUYWJsZS5BREMsIHRhcmdldC5jaGFyTmFtZSkpIHRoZW4NCgkJcmV0dXJuIHNlbGYuX19Qcmlvcml0eU9yZGVyW3NlbGYuRW5lbXlDb3VudF1bc2VsZi5fX1ByaW9yaXR5SW5kZXguQURDXQ0KCWVuZA0KDQoJaWYgKHRhYmxlLmNvbnRhaW5zKHNlbGYuX19Qcmlvcml0eVRhYmxlLkFQQywgdGFyZ2V0LmNoYXJOYW1lKSkgdGhlbg0KCQlyZXR1cm4gc2VsZi5fX1ByaW9yaXR5T3JkZXJbc2VsZi5FbmVteUNvdW50XVtzZWxmLl9fUHJpb3JpdHlJbmRleC5BUENdDQoJZW5kDQoNCglpZiAodGFibGUuY29udGFpbnMoc2VsZi5fX1ByaW9yaXR5VGFibGUuU3VwcG9ydCwgdGFyZ2V0LmNoYXJOYW1lKSkgdGhlbg0KCQlyZXR1cm4gc2VsZi5fX1ByaW9yaXR5T3JkZXJbc2VsZi5FbmVteUNvdW50XVtzZWxmLl9fUHJpb3JpdHlJbmRleC5TdXBwb3J0XQ0KCWVuZA0KDQoJaWYgKHRhYmxlLmNvbnRhaW5zKHNlbGYuX19Qcmlvcml0eVRhYmxlLkJydWlzZXIsIHRhcmdldC5jaGFyTmFtZSkpIHRoZW4NCgkJcmV0dXJuIHNlbGYuX19Qcmlvcml0eU9yZGVyW3NlbGYuRW5lbXlDb3VudF1bc2VsZi5fX1ByaW9yaXR5SW5kZXguQnJ1aXNlcl0NCgllbmQNCg0KCWlmICh0YWJsZS5jb250YWlucyhzZWxmLl9fUHJpb3JpdHlUYWJsZS5UYW5rLCB0YXJnZXQuY2hhck5hbWUpKSB0aGVuDQoJCXJldHVybiBzZWxmLl9fUHJpb3JpdHlPcmRlcltzZWxmLkVuZW15Q291bnRdW3NlbGYuX19Qcmlvcml0eUluZGV4LlRhbmtdDQoJZW5kDQoJDQoJUHJpbnRMb2NhbChGb3JtYXQoIkNvdWxkIG5vdCBmaW5kIGVuZW15IGluIHByaW9yaXR5IHRhYmxlOiB7MX0iLCBlbmVteS5jaGFyTmFtZSksIE1lc3NhZ2VUeXBlLldhcm5pbmcpDQoJcmV0dXJuIDENCg0KZW5kDQoNClByaW9yaXR5TWFuYWdlciA9IFByaW9yaXR5TWFuYWdlcigpDQoNCi0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IFRvd2VyTWFuYWdlciBDbGFzcwkJCQkJCQkJfHwtLQ0KLS0tXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQoNCmNsYXNzKCJUb3dlck1hbmFnZXIiKQ0KDQpmdW5jdGlvbiBUb3dlck1hbmFnZXI6X19pbml0KCkNCg0KCXNlbGYuUmFuZ2UJCQk9IDc3NQ0KDQoJc2VsZi5FbmVteVRvd2Vycwk9IHsgfQ0KCXNlbGYuQWxseVRvd2VycwkJPSB7IH0NCgkNCglmb3IgaSA9IDEsIG9iak1hbmFnZXIuaUNvdW50IGRvDQoJCWxvY2FsIHRvd2VyID0gb2JqTWFuYWdlcjpnZXRPYmplY3QoaSkNCgkJaWYgKHRvd2VyIGFuZCB0b3dlci5uYW1lIGFuZCB0b3dlci52YWxpZCBhbmQgdG93ZXIudHlwZTpmaW5kKCJvYmpfQUlfVHVycmV0IikgYW5kIHRvd2VyLm5hbWU6ZmluZCgiVHVycmV0X1QiKSBhbmQgKHRvd2VyLmhlYWx0aCA+IDEpKSB0aGVuDQoJCQlpZiAodG93ZXIudGVhbSA9PSBteUhlcm8udGVhbSkgdGhlbg0KCQkJCXRhYmxlLmluc2VydChzZWxmLkFsbHlUb3dlcnMsIHRvd2VyKQ0KCQkJZWxzZQ0KCQkJCXRhYmxlLmluc2VydChzZWxmLkVuZW15VG93ZXJzLCB0b3dlcikNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCglUaWNrTWFuYWdlcjpBZGQoIlRvd2VyTWFuYWdlciIsICJVcGRhdGUgVG93ZXIgTWFuYWdlciIsIDUwLCBmdW5jdGlvbigpIHNlbGY6X19PblRpY2soKSBlbmQpDQoJDQoJQ2FsbGJhY2tzOkJpbmQoIlByb2Nlc3NTcGVsbCIsIGZ1bmN0aW9uKHVuaXQsIHNwZWxsKSBzZWxmOl9fT25Qcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpIGVuZCkNCg0KZW5kDQoNCmZ1bmN0aW9uIFRvd2VyTWFuYWdlcjpHZXRDbG9zZXN0RW5lbXlUb3dlcihmcm9tKQ0KDQoJZnJvbSAJCQk9IGZyb20gb3IgbXlIZXJvDQoJDQoJbG9jYWwgY2xvc2VzdAk9IG5pbA0KCWxvY2FsIGRpc3RhbmNlCT0gbWF0aC5odWdlDQoNCglmb3IgXywgdG93ZXIgaW4gaXBhaXJzKHNlbGYuRW5lbXlUb3dlcnMoKSkgZG8NCgkJbG9jYWwgZGlzdCA9IEdldERpc3RhbmNlKHRvd2VyLCBmcm9tKQ0KCQlpZiAobm90IGNsb3Nlc3Qgb3IgKGRpc3QgPCBkaXN0YW5jZSkpIHRoZW4NCgkJCWNsb3Nlc3QgPSB0b3dlcg0KCQkJZGlzdGFuY2UgPSBkaXN0DQoJCWVuZA0KCWVuZA0KCQ0KCXJldHVybiBjbG9zZXN0LCBkaXN0YW5jZQ0KDQplbmQNCg0KZnVuY3Rpb24gVG93ZXJNYW5hZ2VyOkdldENsb3Nlc3RBbGx5VG93ZXIoZnJvbSkNCg0KCWZyb20gCQkJPSBmcm9tIG9yIG15SGVybw0KCQ0KCWxvY2FsIGNsb3Nlc3QJPSBuaWwNCglsb2NhbCBkaXN0YW5jZQk9IG1hdGguaHVnZQ0KDQoJZm9yIF8sIHRvd2VyIGluIGlwYWlycyhzZWxmLkFsbHlUb3dlcnMoKSkgZG8NCgkJbG9jYWwgZGlzdCA9IEdldERpc3RhbmNlKHRvd2VyLCBmcm9tKQ0KCQlpZiAobm90IGNsb3Nlc3Qgb3IgKGRpc3QgPCBkaXN0YW5jZSkpIHRoZW4NCgkJCWNsb3Nlc3QgPSB0b3dlcg0KCQkJZGlzdGFuY2UgPSBkaXN0DQoJCWVuZA0KCWVuZA0KCQ0KCXJldHVybiBjbG9zZXN0LCBkaXN0YW5jZQ0KDQplbmQNCg0KZnVuY3Rpb24gVG93ZXJNYW5hZ2VyOklzRm9jdXNpbmdFbmVteSh1bml0LCB0YXJnZXQpDQoNCglmb3IgXywgdG93ZXIgaW4gaXBhaXJzKHNlbGYuQWxseVRvd2VycykgZG8NCgkJaWYgKHRvd2VyID09IHVuaXQpIHRoZW4NCgkJCWlmICh0b3dlci50YXJnZXQgPT0gdGFyZ2V0KSB0aGVuDQoJCQkJcHJpbnQoImlzIGZvY3VzaW5nIikNCgkJCQlyZXR1cm4gdHJ1ZQ0KCQkJZW5kDQoJCQlicmVhaw0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gZmFsc2UNCg0KZW5kDQoNCmZ1bmN0aW9uIFRvd2VyTWFuYWdlcjpfX09uVGljaygpDQoNCglmb3IgaSwgdG93ZXIgaW4gaXBhaXJzKHNlbGYuQWxseVRvd2VycykgZG8NCgkJaWYgKG5vdCAodG93ZXIgYW5kIHRvd2VyLnZhbGlkIGFuZCAodG93ZXIuaGVhbHRoID4gMSkpKSB0aGVuDQoJCQl0YWJsZS5yZW1vdmUoc2VsZi5BbGx5VG93ZXJzLCBpKQ0KCQkJaSA9IGkgLSAxDQoJCWVsc2VpZiAodG93ZXIudGFyZ2V0KSB0aGVuDQoJCQlpZiAodG93ZXIudGFyZ2V0LmRlYWQgb3IgKEdldERpc3RhbmNlKHRvd2VyLnRhcmdldCwgdG93ZXIpID4gc2VsZi5SYW5nZSkpIHRoZW4NCgkJCQl0b3dlci50YXJnZXQgPSBuaWwNCgkJCWVuZA0KCQllbmQNCgllbmQNCg0KCWZvciBpLCB0b3dlciBpbiBpcGFpcnMoc2VsZi5FbmVteVRvd2VycykgZG8NCgkJaWYgKG5vdCAodG93ZXIgYW5kIHRvd2VyLnZhbGlkIGFuZCAodG93ZXIuaGVhbHRoID4gMSkpKSB0aGVuDQoJCQl0YWJsZS5yZW1vdmUoc2VsZi5FbmVteVRvd2VycywgaSkNCgkJCWkgPSBpIC0gMQ0KCQllbHNlaWYgKHRvd2VyLnRhcmdldCkgdGhlbg0KCQkJaWYgKHRvd2VyLnRhcmdldC5kZWFkIG9yIChHZXREaXN0YW5jZSh0b3dlci50YXJnZXQsIHRvd2VyKSA+IHNlbGYuUmFuZ2UpKSB0aGVuDQoJCQkJdG93ZXIudGFyZ2V0ID0gbmlsDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoNCmVuZA0KDQpmdW5jdGlvbiBUb3dlck1hbmFnZXI6X19PblByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkNCg0KCWlmIChzcGVsbC50YXJnZXQpIHRoZW4NCgkJaWYgKHRhYmxlLmNvbnRhaW5zKHNlbGYuRW5lbXlUb3dlcnMsIHVuaXQpIG9yIHRhYmxlLmNvbnRhaW5zKHNlbGYuQWxseVRvd2VycywgdW5pdCkpIHRoZW4NCgkJCWlmICh1bml0LnRhcmdldCB+PSBzcGVsbC50YXJnZXQpIHRoZW4NCgkJCQl1bml0LnRhcmdldCA9IHNwZWxsLnRhcmdldA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KDQplbmQNCg0KLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gT3ZlcnJpZGUgRnVuY3Rpb25zCQkJCQkJCQl8fC0tDQotLS1cPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCg0KQ2FsbGJhY2tzOkJpbmQoIk92ZXJyaWRlcyIsIGZ1bmN0aW9uKCkNCg0KCWZ1bmN0aW9uIFNpbXBsZVRTOklzVmFsaWQodGFyZ2V0LCByYW5nZSwgXykNCgkNCgkJcmV0dXJuIElzVmFsaWQodGFyZ2V0LCBtYXRoLnNxcnQocmFuZ2UpKQ0KDQoJZW5kDQoNCglmdW5jdGlvbiBTaW1wbGVUUzpMb2FkVG9NZW51KGNvbmZpZykNCgkNCgkJY29uZmlnOk1lbnUoIlNUUyIsICJFbmVteSBQcmlvcml0aWVzIikNCgkNCgkJbG9jYWwgbW9kZWxpc3QgPSB7IH0NCgkJZm9yIF8sIG1vZGUgaW4gaXBhaXJzKFNUU19BVkFJTEFCTEVfTU9ERVMpIGRvDQoJCQl0YWJsZS5pbnNlcnQobW9kZWxpc3QsIG1vZGUubmFtZSkNCgkJZW5kDQoJCQ0KCQljb25maWc6U2VwYXJhdG9yKCkNCgkJY29uZmlnOkRyb3BEb3duKCJtb2RlIiwgIlRhcmdldHRpbmcgTW9kZSIsIDEsIG1vZGVsaXN0KQ0KCQljb25maWcubW9kZSA9IFNlbGVjdG9yLm1vZGUuaWQNCgkJDQoJCWNvbmZpZzpTZXBhcmF0b3IoKQ0KCQljb25maWc6VG9nZ2xlKCJTZWxlY3RlZCIsICJGb2N1cyBTZWxlY3RlZCBUYXJnZXQiLCB0cnVlKQ0KCQljb25maWc6U2VwYXJhdG9yKCkNCgkJY29uZmlnOlNsaWRlcigiUmFuZ2VUb1NhdmUiLCAiUmFuZ2UgdG8gU2F2ZSBJbXBvcnRhbnQgU3BlbGxzIiwgMTUwLCAwLCA1MDApDQoJCWNvbmZpZzpOb3RlKCJOb3RlOiBPbmx5IGZvciBDb21ibyBNb2RlLiIpDQoJCQ0KCQljb25maWc6U2VwYXJhdG9yKCkNCgkJY29uZmlnOlRvZ2dsZSgiUmVjb21tZW5kZWQiLCAiUmVjb21tZW5kZWQgUHJpb3JpdGllcyAoUmVxdWlyZXMgUmVsb2FkKSIsIHRydWUpDQoJCUdldFNhdmUoU2NyaXB0TmFtZSkuUmVjb21tZW5kZWRQcmlvcml0aWVzID0gY29uZmlnLlJlY29tbWVuZGVkDQoJCQ0KCQlsb2NhbCBvbmVFbmVteSA9IGZhbHNlDQoJCWZvciBfLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCgkJCW9uZUVuZW15ID0gdHJ1ZQ0KCQkJY29uZmlnLlNUUzpTbGlkZXIoZW5lbXkuaGFzaCwgZW5lbXkuY2hhck5hbWUsIDEsIDEsIDUpDQoJCQlEZWxheUFjdGlvbihmdW5jdGlvbigpDQoJCQkJaWYgKEdldFNhdmUoU2NyaXB0TmFtZSkuUmVjb21tZW5kZWRQcmlvcml0aWVzKSB0aGVuDQoJCQkJCWNvbmZpZy5TVFNbZW5lbXkuaGFzaF0gPSBQcmlvcml0eU1hbmFnZXI6R2V0UmVjb21tZW5kZWRQcmlvcml0eShlbmVteSkNCgkJCQllbmQNCgkJCWVuZCkNCgkJZW5kDQoJCWlmIChvbmVFbmVteSkgdGhlbg0KCQkJY29uZmlnLlNUUzpTZXBhcmF0b3IoKQ0KCQkJY29uZmlnLlNUUzpOb3RlKCI1IGlzIGhpZ2hlc3QgcHJpb3JpdHkiKQ0KCQllbHNlDQoJCQljb25maWcuU1RTOk5vdGUoIk5vIGVuZW1pZXMgZm91bmQhIikNCgkJZW5kDQoJCQ0KCQlzZWxmLm1lbnUgPSBjb25maWcNCgkJU1RTX01FTlUgPSBzZWxmLm1lbnUNCgkNCgllbmQNCgkNCglpZiAoU3hPcmIpIHRoZW4NCg0KCQlmdW5jdGlvbiBTeE9yYldhbGs6TG9hZFRvTWVudShjb25maWcsIGtleXMsIHNlbGVjdG9yKQ0KCQkNCgkJCWlmIChteUhlcm8ucmFuZ2UgPT0gMC41KSB0aGVuDQoJCQkJRGVsYXlBY3Rpb24oZnVuY3Rpb24oKQ0KCQkJCSAgc2VsZjpMb2FkVG9NZW51KGNvbmZpZykNCgkJCQllbmQpDQoJCQkJcmV0dXJuDQoJCQllbmQNCgkJCQ0KCQkJaWYgKHNlbGYuTG9hZGVkVG9NZW51KSB0aGVuDQoJCQkJcmV0dXJuDQoJCQllbmQNCgkJCQ0KCQkJY29uZmlnOk1lbnUoIkdlbmVyYWwiLCAiU2V0dGluZ3M6IEdlbmVyYWwiKQ0KCQkJaWYgKGtleXMpIHRoZW4NCgkJCQljb25maWc6TWVudSgiS2V5cyIsICJTZXR0aW5nczogS2V5cyIpDQoJCQllbmQNCgkJCWNvbmZpZzpNZW51KCJGYXJtIiwgIlNldHRpbmdzOiBGYXJtaW5nIikNCgkJCWNvbmZpZzpNZW51KCJNYXN0ZXJ5IiwgIlNldHRpbmdzOiBNYXN0ZXJpZXMiKQ0KCQkJY29uZmlnOk1lbnUoIkRyYXciLCAiU2V0dGluZ3M6IERyYXdpbmciKQ0KCQkJDQoJCQljb25maWcuR2VuZXJhbDpUb2dnbGUoIkVuYWJsZWQiLCAiT3JiV2Fsa2VyIEVuYWJsZWQiLCB0cnVlKQ0KCQkJY29uZmlnLkdlbmVyYWw6U2VwYXJhdG9yKCkNCgkJCWNvbmZpZy5HZW5lcmFsOlRvZ2dsZSgiU3RvcE1vdmUiLCAiU3RvcCBNb3ZlIFdoZW4gTW91c2UgQWJvdmUgSGVybyIsIGZhbHNlKQ0KCQkJY29uZmlnLkdlbmVyYWw6U2xpZGVyKCJTdG9wTW92ZVNsaWRlciIsICJSYW5nZSB0byBTdG9wIE1vdmUiLCAxMDAsIDUwLCA1MDApDQoJCQkNCgkJCWlmIChrZXlzKSB0aGVuDQoJCQkJY29uZmlnLktleXM6S2V5QmluZGluZygiRmlnaHQiLCAiQXV0by1DYXJyeSBNb2RlIiwgZmFsc2UsIDMyKQ0KCQkJCWNvbmZpZy5LZXlzOktleUJpbmRpbmcoIkhhcmFzcyIsICJNaXhlZCBNb2RlIiwgZmFsc2UsICJDIikNCgkJCQljb25maWcuS2V5czpLZXlCaW5kaW5nKCJMYW5lQ2xlYXIiLCAiTGFuZS1DbGVhciBNb2RlIiwgZmFsc2UsICJYIikNCgkJCQljb25maWcuS2V5czpLZXlCaW5kaW5nKCJMYXN0SGl0IiwgIkxhc3QtSGl0IE1vZGUiLCBmYWxzZSwgIlYiKQ0KCQkJZWxzZQ0KCQkJCXNlbGYuTm9NZW51S2V5cyA9IHRydWUNCgkJCWVuZA0KCQkJDQoJCQljb25maWcuRmFybTpUb2dnbGUoIkZhcm1PdmVySGFyYXNzIiwgIkZvY3VzIEZhcm0gT3ZlciBIYXJhc3MiLCB0cnVlKQ0KCQkJY29uZmlnLkZhcm06U2VwYXJhdG9yKCkNCgkJCWNvbmZpZy5GYXJtOlNsaWRlcigiRXh0cmFEZWxheSIsICJFeHRyYSBEZWxheSB0byBMYXN0LUhpdCIsIDAsIDAsIDE1MCkNCgkJCQ0KCQkJY29uZmlnLk1hc3Rlcnk6VG9nZ2xlKCJCdXRjaGVyIiwgIkJ1dGNoZXIiLCB0cnVlKQ0KCQkJY29uZmlnLk1hc3Rlcnk6VG9nZ2xlKCJBcmNhbmVCbGFkZSIsICJBcmNhbmUgQmxhZGUiLCB0cnVlKQ0KCQkJY29uZmlnLk1hc3Rlcnk6VG9nZ2xlKCJIYXZvYyIsICJIYXZvYyIsIHRydWUpDQoJCQljb25maWcuTWFzdGVyeTpTbGlkZXIoIkRldmFzdGF0aW5nU3RyaWtlcyIsICJEZXZhc3RhdGluZyBTdHJpa2VzIiwgMCwgMCwgMykNCgkJCQ0KCQkJY29uZmlnLkRyYXc6VG9nZ2xlKCJFbmVteUFBUmFuZ2UiLCAiRHJhdyBFbmVteSBBdXRvLUF0dGFjayBSYW5nZSIsIHRydWUpDQoJCQljb25maWcuRHJhdzpTZXBhcmF0b3IoKQ0KCQkJY29uZmlnLkRyYXc6VG9nZ2xlKCJNaW5pb25DaXJjbGUiLCAiRHJhdyBMYXN0LUhpdCBDaXJjZSBBcm91bmQgTWluaW9ucyIsIHRydWUpDQoJCQljb25maWcuRHJhdzpUb2dnbGUoIk1pbmlvbkxpbmUiLCAiRHJhdyBMYXN0LUhpdCBMaW5lIG9uIE1pbmlvbnMiLCB0cnVlKQ0KCQkJDQoJCQljb25maWc6U2VwYXJhdG9yKCkNCgkJCQ0KCQkJY29uZmlnOkluZm8oIkF1dGhvciIsICJBcm9jIikNCgkJCWNvbmZpZzpJbmZvKCJOYW1lIiwgIlN4T3JiV2FsayIpDQoJCQljb25maWc6SW5mbygiVmVyc2lvbiIsIHNlbGYuVmVyc2lvbikNCgkJCQ0KCQkJY29uZmlnLk1hc3RlcnkuQnV0Y2hlciAJCQkJPSBmYWxzZQ0KCQkJY29uZmlnLk1hc3RlcnkuQXJjYW5lQmxhZGUgCQkJPSBmYWxzZQ0KCQkJY29uZmlnLk1hc3RlcnkuSGF2b2MgCQkJCT0gZmFsc2UNCgkJCWNvbmZpZy5NYXN0ZXJ5LkRldmFzdGF0aW5nU3RyaWtlcwk9IDANCgkJCQ0KCQkJaWYgKHNlbGVjdG9yKSB0aGVuDQoJCQkJc2VsZi5UUyA9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIFBsYXllcjpHZXRSYW5nZSgpLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlKQ0KCQkJCWNvbmZpZzphZGRUUyhzZWxmLlRTKQ0KCQkJZWxzZQ0KCQkJCXNlbGYuTm9TZWxlY3RvciA9IHRydWUNCgkJCQlzZWxmLlRTID0geyByYW5nZSA9IDAsIHRhcmdldCA9IG5pbCB9DQoJCQllbmQNCgkJCQ0KCQkJc2VsZi5TeE9yYk1lbnUJCQkJCQk9IGNvbmZpZw0KCQkJDQoJCQlpZiAobm90IF9HLlN4T3JiTWVudSkgdGhlbg0KCQkJCV9HLlN4T3JiTWVudSA9IHNlbGYuU3hPcmJNZW51DQoJCQkJX0cuU3hPcmJNZW51Lk1vZGUgPSB7IH0NCgkJCQlUaWNrTWFuYWdlcjpBZGQoIlN4T3JiIiwgIk9yYndhbGtlciBUaWNrIFJhdGUiLCAxMDAsIGZ1bmN0aW9uKCkNCgkJCQkJc2VsZjpUaWNrKCkNCgkJCQkJaWYgKG5vdCBzZWxmLk5vU2VsZWN0b3IpIHRoZW4NCgkJCQkJCXNlbGYuVFM6dXBkYXRlKCkNCgkJCQkJZW5kDQoJCQkJCXNlbGY6Q2FsY0tpbGxhYmxlTWluaW9uKCkNCgkJCQkJc2VsZjpDbGVhbk1pbmlvbkF0dGFja3MoKQ0KCQkJCQlzZWxmOkhvdEtleUNhbGxiYWNrKCkNCgkJCQkJc2VsZi5NaW5pb25zOnVwZGF0ZSgpDQoJCQkJCXNlbGYuT3duTWluaW9uczp1cGRhdGUoKQ0KCQkJCQlzZWxmLkxhbmVDbGVhck1pbmlvbnM6dXBkYXRlKCkNCgkJCQkJc2VsZi5KdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQoJCQkJCXNlbGYuT3RoZXJNaW5pb25zOnVwZGF0ZSgpDQoJCQkJZW5kKQ0KCQkJCUNhbGxiYWNrczpCaW5kKCJEcmF3IiwgZnVuY3Rpb24oKQ0KCQkJCQlzZWxmOkRyYXcoKQ0KCQkJCWVuZCkNCgkJCQlDYWxsYmFja3M6QmluZCgiUHJvY2Vzc1NwZWxsIiwgZnVuY3Rpb24odW5pdCwgc3BlbGwpDQoJCQkJCXNlbGY6T25NaW5pb25BdHRhY2sodW5pdCwgc3BlbGwpDQoJCQkJCXNlbGY6T25TZWxmQWN0aW9uKHVuaXQsIHNwZWxsKQ0KCQkJCWVuZCkNCgkJCQlDYWxsYmFja3M6QmluZCgiUmVjdlBhY2tldCIsIGZ1bmN0aW9uKHBhY2tldCkNCgkJCQkJc2VsZjpSZWN2QUFDYW5jZWwocGFja2V0KQ0KCQkJCWVuZCkNCgkJCQlDYWxsYmFja3M6QmluZCgiQ3JlYXRlT2JqIiwgZnVuY3Rpb24ob2JqZWN0KQ0KCQkJCQlzZWxmOkJvbnVzRGFtYWdlT2JqKG9iamVjdCkNCgkJCQkJc2VsZjpPbkNyZWF0ZU9iaihvYmplY3QpDQoJCQkJZW5kKQ0KCQkJCUNhbGxiYWNrczpCaW5kKCJEZWxldGVPYmoiLCBmdW5jdGlvbihvYmplY3QpDQoJCQkJCXNlbGY6T25EZWxldGVPYmoob2JqZWN0KQ0KCQkJCWVuZCkNCgkJCWVuZA0KDQoJCWVuZA0KCQkNCgllbmQNCgkJDQplbmQp"), nil, "bt", _ENV))()
